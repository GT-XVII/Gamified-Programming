<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: BaseExternalAccountClient Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('class_base_external_account_client.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_base_external_account_client-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">BaseExternalAccountClient Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for BaseExternalAccountClient:</div>
<div class="dyncontent">
<div class="center"><img src="class_base_external_account_client__inherit__graph.png" border="0" usemap="#a_base_external_account_client_inherit__map" alt="Inheritance graph"/></div>
<map name="a_base_external_account_client_inherit__map" id="a_base_external_account_client_inherit__map">
<area shape="rect" title=" " alt="" coords="5,120,213,450"/>
<area shape="rect" title=" " alt="" coords="34,5,184,72"/>
<area shape="poly" title=" " alt="" coords="112,86,112,120,107,120,107,86"/>
</map>
</div>
<div class="dynheader">
Collaboration diagram for BaseExternalAccountClient:</div>
<div class="dyncontent">
<div class="center"><img src="class_base_external_account_client__coll__graph.png" border="0" usemap="#a_base_external_account_client_coll__map" alt="Collaboration graph"/></div>
<map name="a_base_external_account_client_coll__map" id="a_base_external_account_client_coll__map">
<area shape="rect" title=" " alt="" coords="5,120,213,450"/>
<area shape="rect" title=" " alt="" coords="34,5,184,72"/>
<area shape="poly" title=" " alt="" coords="112,86,112,120,107,120,107,86"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac3c181fbecace73f4d16bf5f1454ff6a" id="r_ac3c181fbecace73f4d16bf5f1454ff6a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac3c181fbecace73f4d16bf5f1454ff6a">constructor</a> (options, additionalOptions)</td></tr>
<tr class="separator:ac3c181fbecace73f4d16bf5f1454ff6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15e4e876505f164608bcf84b5c33fdc1" id="r_a15e4e876505f164608bcf84b5c33fdc1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a15e4e876505f164608bcf84b5c33fdc1">getServiceAccountEmail</a> ()</td></tr>
<tr class="separator:a15e4e876505f164608bcf84b5c33fdc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a401d8ae5c66bc97c2c032f7e750d32cb" id="r_a401d8ae5c66bc97c2c032f7e750d32cb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a401d8ae5c66bc97c2c032f7e750d32cb">setCredentials</a> (<a class="el" href="_0dgrpc_2grpc-js_2build_2src_2index_8js.html#a88f1ca34064fef6dc1e29d7d1cf5cfcf">credentials</a>)</td></tr>
<tr class="separator:a401d8ae5c66bc97c2c032f7e750d32cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0804062ac1325329b9f76ac603ac74c" id="r_ad0804062ac1325329b9f76ac603ac74c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="util_2dist_2index_8cjs_8js.html#af516a86cc3f563f4c12f98f31f1e2e57">async</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad0804062ac1325329b9f76ac603ac74c">getAccessToken</a> ()</td></tr>
<tr class="separator:ad0804062ac1325329b9f76ac603ac74c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8caad074ecc8066c195db462a1632828" id="r_a8caad074ecc8066c195db462a1632828"><td class="memItemLeft" align="right" valign="top"><a class="el" href="util_2dist_2index_8cjs_8js.html#af516a86cc3f563f4c12f98f31f1e2e57">async</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8caad074ecc8066c195db462a1632828">getRequestHeaders</a> ()</td></tr>
<tr class="separator:a8caad074ecc8066c195db462a1632828"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab381dadac9ad3b6e8c34f194714c9cc3" id="r_ab381dadac9ad3b6e8c34f194714c9cc3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab381dadac9ad3b6e8c34f194714c9cc3">request</a> (opts, <a class="el" href="database-compat_2dist_2index_8standalone_8js.html#a622460feeccdab6d8f307936fc6b36fb">callback</a>)</td></tr>
<tr class="separator:ab381dadac9ad3b6e8c34f194714c9cc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e5c9c1ea4ac4463c04a9bdeb9e3fc41" id="r_a0e5c9c1ea4ac4463c04a9bdeb9e3fc41"><td class="memItemLeft" align="right" valign="top"><a class="el" href="util_2dist_2index_8cjs_8js.html#af516a86cc3f563f4c12f98f31f1e2e57">async</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0e5c9c1ea4ac4463c04a9bdeb9e3fc41">getProjectId</a> ()</td></tr>
<tr class="separator:a0e5c9c1ea4ac4463c04a9bdeb9e3fc41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9050d118276189d24a16ce5928a28335" id="r_a9050d118276189d24a16ce5928a28335"><td class="memItemLeft" align="right" valign="top"><a class="el" href="util_2dist_2index_8cjs_8js.html#af516a86cc3f563f4c12f98f31f1e2e57">async</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9050d118276189d24a16ce5928a28335">requestAsync</a> (opts, reAuthRetried=<a class="el" href="database-compat_2dist_2index_8standalone_8js.html#a5df37b7f02e5cdc7d9412b7f872b8e01">false</a>)</td></tr>
<tr class="separator:a9050d118276189d24a16ce5928a28335"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cbb6f741d620990412edb466f7c3e57" id="r_a7cbb6f741d620990412edb466f7c3e57"><td class="memItemLeft" align="right" valign="top"><a class="el" href="util_2dist_2index_8cjs_8js.html#af516a86cc3f563f4c12f98f31f1e2e57">async</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7cbb6f741d620990412edb466f7c3e57">refreshAccessTokenAsync</a> ()</td></tr>
<tr class="separator:a7cbb6f741d620990412edb466f7c3e57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55a12679fd3f75c44401f2618d84292b" id="r_a55a12679fd3f75c44401f2618d84292b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a55a12679fd3f75c44401f2618d84292b">getProjectNumber</a> (audience)</td></tr>
<tr class="separator:a55a12679fd3f75c44401f2618d84292b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f7b31af6e0999b67597375cd2b5306c" id="r_a8f7b31af6e0999b67597375cd2b5306c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="util_2dist_2index_8cjs_8js.html#af516a86cc3f563f4c12f98f31f1e2e57">async</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8f7b31af6e0999b67597375cd2b5306c">getImpersonatedAccessToken</a> (<a class="el" href="util_2dist_2index_8cjs_8js.html#a87da3d8264af1c9427605148f20dd9c4">token</a>)</td></tr>
<tr class="separator:a8f7b31af6e0999b67597375cd2b5306c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada53ec42a80860f6e777d00cd501e20d" id="r_ada53ec42a80860f6e777d00cd501e20d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ada53ec42a80860f6e777d00cd501e20d">isExpired</a> (accessToken)</td></tr>
<tr class="separator:ada53ec42a80860f6e777d00cd501e20d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc38efcb9d33126f69bf7267d9407a4f" id="r_abc38efcb9d33126f69bf7267d9407a4f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abc38efcb9d33126f69bf7267d9407a4f">getScopesArray</a> ()</td></tr>
<tr class="separator:abc38efcb9d33126f69bf7267d9407a4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a0ef1ea66a830faf89585cc08af41a5" id="r_a4a0ef1ea66a830faf89585cc08af41a5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4a0ef1ea66a830faf89585cc08af41a5">getMetricsHeaderValue</a> ()</td></tr>
<tr class="separator:a4a0ef1ea66a830faf89585cc08af41a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="class_base.html">Base</a> external account client. This is used to instantiate AuthClients for exchanging external account credentials for GCP access token and authorizing requests to GCP APIs. The base class implements common logic for exchanging various type of external credentials for GCP access token. The logic of determining and retrieving the external credential based on the environment and credential_source will be left for the subclasses. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ac3c181fbecace73f4d16bf5f1454ff6a" name="ac3c181fbecace73f4d16bf5f1454ff6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3c181fbecace73f4d16bf5f1454ff6a">&#9670;&#160;</a></span>constructor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BaseExternalAccountClient::constructor </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>options</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>additionalOptions</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Instantiate a <a class="el" href="class_base_external_account_client.html">BaseExternalAccountClient</a> instance using the provided JSON object loaded from an external account credentials file. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">options</td><td>The external account options object typically loaded from the external account JSON credential file. The camelCased options are aliases for the snake_cased options. </td></tr>
    <tr><td class="paramname">additionalOptions</td><td><b>DEPRECATED, all options are available in the <code>options</code> parameter.</b> Optional additional behavior customization options. These currently customize expiration threshold time and whether to retry on 401/403 API request errors. </td></tr>
  </table>
  </dd>
</dl>
<p><a class="el" href="class_a.html">A</a> pending access token request. Used for concurrent calls.</p>

<p class="reference">References <a class="el" href="logger_2dist_2esm_2index_8esm5_8js.html#a0adf123df8967a14b5bdd9ff3bbe2d0c">_a</a>, <a class="el" href="baseexternalclient_8js.html#a80e9a534fae049c9db83545a06bf3bd3">_BaseExternalAccountClient_instances</a>, <a class="el" href="baseexternalclient_8js.html#aa05cdb0f5572a0d71e715c9360a56943">_BaseExternalAccountClient_pendingAccessToken</a>, <a class="el" href="baseexternalclient_8js.html#a545d79b3be01df2399efb6a82e47f67d">DEFAULT_OAUTH_SCOPE</a>, <a class="el" href="external_account_authorized_user_client_8js.html#a13ff36530d8d18bc8f409911211aeb9c">DEFAULT_TOKEN_URL</a>, <a class="el" href="database-compat_2dist_2index_8standalone_8js.html#aa4072ba4b6b56b0fb6f4801f17ab2b34">exports</a>, <a class="el" href="#a55a12679fd3f75c44401f2618d84292b">getProjectNumber()</a>, <a class="el" href="agent-base_2dist_2helpers_8js.html#ab3093f9d8507c035b404b9d49bdb40f7">https</a>, <a class="el" href="database-compat_2dist_2index_8standalone_8js.html#ad061d61e10918d5b27e272593239c0e7">if()</a>, <a class="el" href="baseexternalclient_8js.html#aed84e6a8dd47163697d602a45f4cf675">sts</a>, <a class="el" href="_0dgoogle-cloud_2storage_2node__modules_2mime_2cli_8js.html#a2807c8a03bea7dd9d4118326348f457e">type</a>, <a class="el" href="_0dgoogle-cloud_2storage_2node__modules_2uuid_2dist_2esm-browser_2v35_8js.html#a2a5fb34fada8ceb9b494ec16878c09dc">URL</a>, and <a class="el" href="baseexternalclient_8js.html#a6af3fa6e24c6a46faf4552f3a2ad8783">util_1</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_base_external_account_client_ac3c181fbecace73f4d16bf5f1454ff6a_cgraph.png" border="0" usemap="#aclass_base_external_account_client_ac3c181fbecace73f4d16bf5f1454ff6a_cgraph" alt=""/></div>
<map name="aclass_base_external_account_client_ac3c181fbecace73f4d16bf5f1454ff6a_cgraph" id="aclass_base_external_account_client_ac3c181fbecace73f4d16bf5f1454ff6a_cgraph">
<area shape="rect" title=" " alt="" coords="5,35,187,75"/>
<area shape="rect" href="class_base_external_account_client.html#a55a12679fd3f75c44401f2618d84292b" title=" " alt="" coords="235,5,416,46"/>
<area shape="poly" title=" " alt="" coords="187,41,219,37,220,42,187,46"/>
<area shape="rect" href="database-compat_2dist_2index_8standalone_8js.html#ad061d61e10918d5b27e272593239c0e7" title=" " alt="" coords="306,70,345,96"/>
<area shape="poly" title=" " alt="" coords="187,63,291,76,290,82,187,69"/>
</map>
</div>

</div>
</div>
<a id="ad0804062ac1325329b9f76ac603ac74c" name="ad0804062ac1325329b9f76ac603ac74c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0804062ac1325329b9f76ac603ac74c">&#9670;&#160;</a></span>getAccessToken()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="util_2dist_2index_8cjs_8js.html#af516a86cc3f563f4c12f98f31f1e2e57">async</a> BaseExternalAccountClient::getAccessToken </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_a.html">A</a> promise that resolves with the current GCP access token response. If the current credential is expired, a new one is retrieved. </dd></dl>

<p class="reference">References <a class="el" href="#ada53ec42a80860f6e777d00cd501e20d">isExpired()</a>, <a class="el" href="#a7cbb6f741d620990412edb466f7c3e57">refreshAccessTokenAsync()</a>, <a class="el" href="express_2lib_2express_8js.html#abde3c35e3bb7e5225dd7f234c685329c">res</a>, and <a class="el" href="util_2dist_2index_8cjs_8js.html#a87da3d8264af1c9427605148f20dd9c4">token</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_base_external_account_client_ad0804062ac1325329b9f76ac603ac74c_cgraph.png" border="0" usemap="#aclass_base_external_account_client_ad0804062ac1325329b9f76ac603ac74c_cgraph" alt=""/></div>
<map name="aclass_base_external_account_client_ad0804062ac1325329b9f76ac603ac74c_cgraph" id="aclass_base_external_account_client_ad0804062ac1325329b9f76ac603ac74c_cgraph">
<area shape="rect" title=" " alt="" coords="5,39,187,79"/>
<area shape="rect" href="class_base_external_account_client.html#ada53ec42a80860f6e777d00cd501e20d" title=" " alt="" coords="237,5,418,46"/>
<area shape="poly" title=" " alt="" coords="187,43,221,38,222,44,187,49"/>
<area shape="rect" href="class_base_external_account_client.html#a7cbb6f741d620990412edb466f7c3e57" title=" " alt="" coords="235,71,420,111"/>
<area shape="poly" title=" " alt="" coords="187,69,220,73,219,79,187,74"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_base_external_account_client_ad0804062ac1325329b9f76ac603ac74c_icgraph.png" border="0" usemap="#aclass_base_external_account_client_ad0804062ac1325329b9f76ac603ac74c_icgraph" alt=""/></div>
<map name="aclass_base_external_account_client_ad0804062ac1325329b9f76ac603ac74c_icgraph" id="aclass_base_external_account_client_ad0804062ac1325329b9f76ac603ac74c_icgraph">
<area shape="rect" title=" " alt="" coords="693,51,875,91"/>
<area shape="rect" href="class_base_external_account_client.html#a8caad074ecc8066c195db462a1632828" title=" " alt="" coords="464,51,645,91"/>
<area shape="poly" title=" " alt="" coords="678,74,646,74,646,68,678,68"/>
<area shape="rect" href="class_base_external_account_client.html#a0e5c9c1ea4ac4463c04a9bdeb9e3fc41" title=" " alt="" coords="235,5,416,46"/>
<area shape="poly" title=" " alt="" coords="448,53,416,46,417,41,450,48"/>
<area shape="rect" href="class_base_external_account_client.html#a9050d118276189d24a16ce5928a28335" title=" " alt="" coords="235,95,416,135"/>
<area shape="poly" title=" " alt="" coords="449,94,417,100,416,95,448,89"/>
<area shape="poly" title=" " alt="" coords="363,82,349,76,325,73,303,75,290,80,285,86,287,93,282,95,280,85,287,76,302,70,325,68,350,70,365,77"/>
<area shape="rect" href="class_base_external_account_client.html#ab381dadac9ad3b6e8c34f194714c9cc3" title=" " alt="" coords="5,95,187,135"/>
<area shape="poly" title=" " alt="" coords="219,118,187,118,187,112,219,112"/>
</map>
</div>

</div>
</div>
<a id="a8f7b31af6e0999b67597375cd2b5306c" name="a8f7b31af6e0999b67597375cd2b5306c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f7b31af6e0999b67597375cd2b5306c">&#9670;&#160;</a></span>getImpersonatedAccessToken()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="util_2dist_2index_8cjs_8js.html#af516a86cc3f563f4c12f98f31f1e2e57">async</a> BaseExternalAccountClient::getImpersonatedAccessToken </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>token</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Exchanges an external account GCP access token for a service account impersonated access token using iamcredentials GenerateAccessToken API. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">token</td><td>The access token to exchange for a service account access token. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_a.html">A</a> promise that resolves with the service account impersonated credentials response. </dd></dl>

<p class="reference">References <a class="el" href="form_8js.html#ab63a7754967c678e14c9ece9cf96be37">$</a>, <a class="el" href="_0dprotobufjs_2utf8_2tests_2index_8js.html#a606a87425a3a6c440c6fdcbfb72c9b68">data</a>, <a class="el" href="#abc38efcb9d33126f69bf7267d9407a4f">getScopesArray()</a>, <a class="el" href="database-compat_2dist_2index_8standalone_8js.html#a7f2cb2fcdd79bf72cefd29b7bc2d10fa">headers</a>, <a class="el" href="lodash_2method_8js.html#a2f565198b0a61cb8648a01f0d9617cd7">method</a>, <a class="el" href="express_2lib_2express_8js.html#abde3c35e3bb7e5225dd7f234c685329c">res</a>, <a class="el" href="database-compat_2dist_2index_8standalone_8js.html#ac70ac40ef8199c59316b35022dd21914">response</a>, <a class="el" href="util_2dist_2index_8cjs_8js.html#a87da3d8264af1c9427605148f20dd9c4">token</a>, and <a class="el" href="database-compat_2dist_2index_8standalone_8js.html#acf0a8b41f00a22e21672c8b3768a0618">url</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_base_external_account_client_a8f7b31af6e0999b67597375cd2b5306c_cgraph.png" border="0" usemap="#aclass_base_external_account_client_a8f7b31af6e0999b67597375cd2b5306c_cgraph" alt=""/></div>
<map name="aclass_base_external_account_client_a8f7b31af6e0999b67597375cd2b5306c_cgraph" id="aclass_base_external_account_client_a8f7b31af6e0999b67597375cd2b5306c_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,211,46"/>
<area shape="rect" href="class_base_external_account_client.html#abc38efcb9d33126f69bf7267d9407a4f" title=" " alt="" coords="259,5,440,46"/>
<area shape="poly" title=" " alt="" coords="211,23,243,23,243,28,211,28"/>
</map>
</div>

</div>
</div>
<a id="a4a0ef1ea66a830faf89585cc08af41a5" name="a4a0ef1ea66a830faf89585cc08af41a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a0ef1ea66a830faf89585cc08af41a5">&#9670;&#160;</a></span>getMetricsHeaderValue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BaseExternalAccountClient::getMetricsHeaderValue </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="form_8js.html#ab63a7754967c678e14c9ece9cf96be37">$</a>, <a class="el" href="google-auth-library_2build_2src_2index_8js.html#ad26b69249342cfd7b4d6e0352d739857">auth</a>, <a class="el" href="rxjs_8umd_8js.html#a729ec4717f914fce241d4dccc9a03066">config</a>, <a class="el" href="_0dopentelemetry_2api_2build_2esm_2platform_2index_8js.html#a74c72f849f998803d0f301e524445c36">node</a>, <a class="el" href="yargs-parser_2build_2lib_2index_8js.html#a746c1dba5b291273ede6005252d220fb">nodeVersion</a>, <a class="el" href="_0dgoogle-cloud_2storage_2node__modules_2mime_2cli_8js.html#a7f6cb4aa5112e614bc63e81ace6378d0">pkg</a>, <a class="el" href="ipaddr_8min_8js.html#abcedab16429ea0641c6596f556f2e102">process</a>, <a class="el" href="bench_8js.html#a4f85c6ae2a8cdd19ca9b7006b1860d40">source</a>, <a class="el" href="get-intrinsic_2index_8js.html#ae6aa4817f0f49345b718ea6b4abae197">undefined</a>, and <a class="el" href="ordered-map_8min_8js.html#a207400f40ed647015069564fa40946e1">v</a>.</p>

</div>
</div>
<a id="a0e5c9c1ea4ac4463c04a9bdeb9e3fc41" name="a0e5c9c1ea4ac4463c04a9bdeb9e3fc41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e5c9c1ea4ac4463c04a9bdeb9e3fc41">&#9670;&#160;</a></span>getProjectId()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="util_2dist_2index_8cjs_8js.html#af516a86cc3f563f4c12f98f31f1e2e57">async</a> BaseExternalAccountClient::getProjectId </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_a.html">A</a> promise that resolves with the project ID corresponding to the current workload identity pool or current workforce pool if determinable. For workforce pool credential, it returns the project ID corresponding to the workforcePoolUserProject. This is introduced to match the current pattern of using the <a class="el" href="class_auth.html">Auth</a> library: const projectId = await auth.getProjectId(); const url = <code><a href="https://dns.googleapis.com/dns/v1/projects/">https://dns.googleapis.com/dns/v1/projects/</a>${projectId}</code>; const res = await client.request({ url }); The resource may not have permission (resourcemanager.projects.get) to call this API or the required scopes may not be selected: <a href="https://cloud.google.com/resource-manager/reference/rest/v1/projects/get#authorization-scopes">https://cloud.google.com/resource-manager/reference/rest/v1/projects/get#authorization-scopes</a> </dd></dl>

<p class="reference">References <a class="el" href="form_8js.html#ab63a7754967c678e14c9ece9cf96be37">$</a>, <a class="el" href="#a8caad074ecc8066c195db462a1632828">getRequestHeaders()</a>, <a class="el" href="database-compat_2dist_2index_8standalone_8js.html#a7f2cb2fcdd79bf72cefd29b7bc2d10fa">headers</a>, <a class="el" href="database-compat_2dist_2index_8standalone_8js.html#ac70ac40ef8199c59316b35022dd21914">response</a>, and <a class="el" href="database-compat_2dist_2index_8standalone_8js.html#acf0a8b41f00a22e21672c8b3768a0618">url</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_base_external_account_client_a0e5c9c1ea4ac4463c04a9bdeb9e3fc41_cgraph.png" border="0" usemap="#aclass_base_external_account_client_a0e5c9c1ea4ac4463c04a9bdeb9e3fc41_cgraph" alt=""/></div>
<map name="aclass_base_external_account_client_a0e5c9c1ea4ac4463c04a9bdeb9e3fc41_cgraph" id="aclass_base_external_account_client_a0e5c9c1ea4ac4463c04a9bdeb9e3fc41_cgraph">
<area shape="rect" title=" " alt="" coords="5,39,187,79"/>
<area shape="rect" href="class_base_external_account_client.html#a8caad074ecc8066c195db462a1632828" title=" " alt="" coords="235,39,416,79"/>
<area shape="poly" title=" " alt="" coords="187,56,219,56,219,62,187,62"/>
<area shape="rect" href="class_base_external_account_client.html#ad0804062ac1325329b9f76ac603ac74c" title=" " alt="" coords="464,39,645,79"/>
<area shape="poly" title=" " alt="" coords="416,56,449,56,449,62,416,62"/>
<area shape="rect" href="class_base_external_account_client.html#ada53ec42a80860f6e777d00cd501e20d" title=" " alt="" coords="695,5,877,46"/>
<area shape="poly" title=" " alt="" coords="645,43,680,38,680,44,646,49"/>
<area shape="rect" href="class_base_external_account_client.html#a7cbb6f741d620990412edb466f7c3e57" title=" " alt="" coords="693,71,879,111"/>
<area shape="poly" title=" " alt="" coords="646,69,678,73,677,79,645,74"/>
</map>
</div>

</div>
</div>
<a id="a55a12679fd3f75c44401f2618d84292b" name="a55a12679fd3f75c44401f2618d84292b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55a12679fd3f75c44401f2618d84292b">&#9670;&#160;</a></span>getProjectNumber()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BaseExternalAccountClient::getProjectNumber </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>audience</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the workload identity pool project number if it is determinable from the audience resource name. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">audience</td><td>The STS audience used to determine the project number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The project number associated with the workload identity pool, if this can be determined from the STS audience field. Otherwise, null is returned. </dd></dl>

<p class="reference">References <a class="el" href="layer_8js.html#aee433120cbb9ab29eb32064146e11ef5">match</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_base_external_account_client_a55a12679fd3f75c44401f2618d84292b_icgraph.png" border="0" usemap="#aclass_base_external_account_client_a55a12679fd3f75c44401f2618d84292b_icgraph" alt=""/></div>
<map name="aclass_base_external_account_client_a55a12679fd3f75c44401f2618d84292b_icgraph" id="aclass_base_external_account_client_a55a12679fd3f75c44401f2618d84292b_icgraph">
<area shape="rect" title=" " alt="" coords="235,5,416,46"/>
<area shape="rect" href="class_base_external_account_client.html#ac3c181fbecace73f4d16bf5f1454ff6a" title=" " alt="" coords="5,5,187,46"/>
<area shape="poly" title=" " alt="" coords="219,28,187,28,187,23,219,23"/>
</map>
</div>

</div>
</div>
<a id="a8caad074ecc8066c195db462a1632828" name="a8caad074ecc8066c195db462a1632828"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8caad074ecc8066c195db462a1632828">&#9670;&#160;</a></span>getRequestHeaders()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="util_2dist_2index_8cjs_8js.html#af516a86cc3f563f4c12f98f31f1e2e57">async</a> BaseExternalAccountClient::getRequestHeaders </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The main authentication interface. It takes an optional url which when present is the endpoint being accessed, and returns a Promise which resolves with authorization header fields.</p>
<p>The result has the form: { Authorization: 'Bearer &lt;access_token_value&gt;' } </p>

<p class="reference">References <a class="el" href="form_8js.html#ab63a7754967c678e14c9ece9cf96be37">$</a>, <a class="el" href="#ad0804062ac1325329b9f76ac603ac74c">getAccessToken()</a>, and <a class="el" href="database-compat_2dist_2index_8standalone_8js.html#a7f2cb2fcdd79bf72cefd29b7bc2d10fa">headers</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_base_external_account_client_a8caad074ecc8066c195db462a1632828_cgraph.png" border="0" usemap="#aclass_base_external_account_client_a8caad074ecc8066c195db462a1632828_cgraph" alt=""/></div>
<map name="aclass_base_external_account_client_a8caad074ecc8066c195db462a1632828_cgraph" id="aclass_base_external_account_client_a8caad074ecc8066c195db462a1632828_cgraph">
<area shape="rect" title=" " alt="" coords="5,39,187,79"/>
<area shape="rect" href="class_base_external_account_client.html#ad0804062ac1325329b9f76ac603ac74c" title=" " alt="" coords="235,39,416,79"/>
<area shape="poly" title=" " alt="" coords="187,56,219,56,219,62,187,62"/>
<area shape="rect" href="class_base_external_account_client.html#ada53ec42a80860f6e777d00cd501e20d" title=" " alt="" coords="466,5,647,46"/>
<area shape="poly" title=" " alt="" coords="416,43,450,38,451,44,417,49"/>
<area shape="rect" href="class_base_external_account_client.html#a7cbb6f741d620990412edb466f7c3e57" title=" " alt="" coords="464,71,649,111"/>
<area shape="poly" title=" " alt="" coords="417,69,449,73,448,79,416,74"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_base_external_account_client_a8caad074ecc8066c195db462a1632828_icgraph.png" border="0" usemap="#aclass_base_external_account_client_a8caad074ecc8066c195db462a1632828_icgraph" alt=""/></div>
<map name="aclass_base_external_account_client_a8caad074ecc8066c195db462a1632828_icgraph" id="aclass_base_external_account_client_a8caad074ecc8066c195db462a1632828_icgraph">
<area shape="rect" title=" " alt="" coords="464,51,645,91"/>
<area shape="rect" href="class_base_external_account_client.html#a0e5c9c1ea4ac4463c04a9bdeb9e3fc41" title=" " alt="" coords="235,5,416,46"/>
<area shape="poly" title=" " alt="" coords="448,53,416,46,417,41,450,48"/>
<area shape="rect" href="class_base_external_account_client.html#a9050d118276189d24a16ce5928a28335" title=" " alt="" coords="235,95,416,135"/>
<area shape="poly" title=" " alt="" coords="449,94,417,100,416,95,448,89"/>
<area shape="poly" title=" " alt="" coords="363,82,349,76,325,73,303,75,290,80,285,86,287,93,282,95,280,85,287,76,302,70,325,68,350,70,365,77"/>
<area shape="rect" href="class_base_external_account_client.html#ab381dadac9ad3b6e8c34f194714c9cc3" title=" " alt="" coords="5,95,187,135"/>
<area shape="poly" title=" " alt="" coords="219,118,187,118,187,112,219,112"/>
</map>
</div>

</div>
</div>
<a id="abc38efcb9d33126f69bf7267d9407a4f" name="abc38efcb9d33126f69bf7267d9407a4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc38efcb9d33126f69bf7267d9407a4f">&#9670;&#160;</a></span>getScopesArray()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BaseExternalAccountClient::getScopesArray </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The list of scopes for the requested GCP access token. </dd></dl>

<p class="reference">References <a class="el" href="baseexternalclient_8js.html#a545d79b3be01df2399efb6a82e47f67d">DEFAULT_OAUTH_SCOPE</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_base_external_account_client_abc38efcb9d33126f69bf7267d9407a4f_icgraph.png" border="0" usemap="#aclass_base_external_account_client_abc38efcb9d33126f69bf7267d9407a4f_icgraph" alt=""/></div>
<map name="aclass_base_external_account_client_abc38efcb9d33126f69bf7267d9407a4f_icgraph" id="aclass_base_external_account_client_abc38efcb9d33126f69bf7267d9407a4f_icgraph">
<area shape="rect" title=" " alt="" coords="259,5,440,46"/>
<area shape="rect" href="class_base_external_account_client.html#a8f7b31af6e0999b67597375cd2b5306c" title=" " alt="" coords="5,5,211,46"/>
<area shape="poly" title=" " alt="" coords="243,28,211,28,211,23,243,23"/>
</map>
</div>

</div>
</div>
<a id="a15e4e876505f164608bcf84b5c33fdc1" name="a15e4e876505f164608bcf84b5c33fdc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15e4e876505f164608bcf84b5c33fdc1">&#9670;&#160;</a></span>getServiceAccountEmail()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BaseExternalAccountClient::getServiceAccountEmail </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The service account email to be impersonated, if available. </p>
<p>Prevents DOS attacks. </p><dl class="section see"><dt>See also</dt><dd><code><a class="el" href="">https://github.com/googleapis/google-auth-library-nodejs/security/code-scanning/84</a></code></dd></dl>

<p class="reference">References <a class="el" href="form_8js.html#ab63a7754967c678e14c9ece9cf96be37">$</a>, <a class="el" href="logger_2dist_2esm_2index_8esm5_8js.html#a0adf123df8967a14b5bdd9ff3bbe2d0c">_a</a>, <a class="el" href="express_2lib_2request_8js.html#a5e3afd97276cc403924d1a449a83ea84">is</a>, <a class="el" href="_0dopentelemetry_2api_2build_2esm_2internal_2semver_8js.html#a03ebaa93eddf6cea83c58d6fadd722a1">re</a>, <a class="el" href="lodash_2core_8js.html#a348c112a244660a2f280cda892658c24">result</a>, and <a class="el" href="_0dgoogle-cloud_2storage_2node__modules_2uuid_2dist_2esm-browser_2v35_8js.html#a2a5fb34fada8ceb9b494ec16878c09dc">URL</a>.</p>

</div>
</div>
<a id="ada53ec42a80860f6e777d00cd501e20d" name="ada53ec42a80860f6e777d00cd501e20d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada53ec42a80860f6e777d00cd501e20d">&#9670;&#160;</a></span>isExpired()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BaseExternalAccountClient::isExpired </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>accessToken</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns whether the provided credentials are expired or not. If there is no expiry time, assumes the token is not expired or expiring. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">accessToken</td><td>The credentials to check for expiration. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Whether the credentials are expired or not. </dd></dl>

<p class="reference">References <a class="el" href="lodash_2debounce_8js.html#ae2dc5120e9ccb39c5ef94d5c203e534a">now</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_base_external_account_client_ada53ec42a80860f6e777d00cd501e20d_icgraph.png" border="0" usemap="#aclass_base_external_account_client_ada53ec42a80860f6e777d00cd501e20d_icgraph" alt=""/></div>
<map name="aclass_base_external_account_client_ada53ec42a80860f6e777d00cd501e20d_icgraph" id="aclass_base_external_account_client_ada53ec42a80860f6e777d00cd501e20d_icgraph">
<area shape="rect" title=" " alt="" coords="923,51,1104,91"/>
<area shape="rect" href="class_base_external_account_client.html#ad0804062ac1325329b9f76ac603ac74c" title=" " alt="" coords="693,51,875,91"/>
<area shape="poly" title=" " alt="" coords="907,74,875,74,875,68,907,68"/>
<area shape="rect" href="class_base_external_account_client.html#a8caad074ecc8066c195db462a1632828" title=" " alt="" coords="464,51,645,91"/>
<area shape="poly" title=" " alt="" coords="678,74,646,74,646,68,678,68"/>
<area shape="rect" href="class_base_external_account_client.html#a0e5c9c1ea4ac4463c04a9bdeb9e3fc41" title=" " alt="" coords="235,5,416,46"/>
<area shape="poly" title=" " alt="" coords="448,53,416,46,417,41,450,48"/>
<area shape="rect" href="class_base_external_account_client.html#a9050d118276189d24a16ce5928a28335" title=" " alt="" coords="235,95,416,135"/>
<area shape="poly" title=" " alt="" coords="449,94,417,100,416,95,448,89"/>
<area shape="poly" title=" " alt="" coords="363,82,349,76,325,73,303,75,290,80,285,86,287,93,282,95,280,85,287,76,302,70,325,68,350,70,365,77"/>
<area shape="rect" href="class_base_external_account_client.html#ab381dadac9ad3b6e8c34f194714c9cc3" title=" " alt="" coords="5,95,187,135"/>
<area shape="poly" title=" " alt="" coords="219,118,187,118,187,112,219,112"/>
</map>
</div>

</div>
</div>
<a id="a7cbb6f741d620990412edb466f7c3e57" name="a7cbb6f741d620990412edb466f7c3e57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cbb6f741d620990412edb466f7c3e57">&#9670;&#160;</a></span>refreshAccessTokenAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="util_2dist_2index_8cjs_8js.html#af516a86cc3f563f4c12f98f31f1e2e57">async</a> BaseExternalAccountClient::refreshAccessTokenAsync </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Forces token refresh, even if unexpired tokens are currently cached. External credentials are exchanged for GCP access tokens via the token exchange endpoint and other settings provided in the client options object. If the service_account_impersonation_url is provided, an additional step to exchange the external account GCP access token for a service account impersonated token is performed. </p><dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_a.html">A</a> promise that resolves with the fresh GCP access tokens. </dd></dl>

<p class="reference">References <a class="el" href="baseexternalclient_8js.html#a447cd4ee0c75db2d366d333c1c6ab92b">__classPrivateFieldGet</a>, <a class="el" href="baseexternalclient_8js.html#a9c0a3b4ec16c0e88e32e52464cf3423e">__classPrivateFieldSet</a>, <a class="el" href="baseexternalclient_8js.html#a80e9a534fae049c9db83545a06bf3bd3">_BaseExternalAccountClient_instances</a>, <a class="el" href="baseexternalclient_8js.html#a09b7171e7d0420f0f3d0a4cd01bf9392">_BaseExternalAccountClient_internalRefreshAccessTokenAsync</a>, <a class="el" href="baseexternalclient_8js.html#aa05cdb0f5572a0d71e715c9360a56943">_BaseExternalAccountClient_pendingAccessToken</a>, and <a class="el" href="hasown_2index_8js.html#af41b23e59e21fbbca9175e1dbd07b54e">call</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_base_external_account_client_a7cbb6f741d620990412edb466f7c3e57_icgraph.png" border="0" usemap="#aclass_base_external_account_client_a7cbb6f741d620990412edb466f7c3e57_icgraph" alt=""/></div>
<map name="aclass_base_external_account_client_a7cbb6f741d620990412edb466f7c3e57_icgraph" id="aclass_base_external_account_client_a7cbb6f741d620990412edb466f7c3e57_icgraph">
<area shape="rect" title=" " alt="" coords="923,67,1108,107"/>
<area shape="rect" href="class_base_external_account_client.html#ad0804062ac1325329b9f76ac603ac74c" title=" " alt="" coords="693,37,875,78"/>
<area shape="poly" title=" " alt="" coords="907,76,875,72,876,67,908,71"/>
<area shape="rect" href="class_base_external_account_client.html#a9050d118276189d24a16ce5928a28335" title=" " alt="" coords="235,95,416,135"/>
<area shape="poly" title=" " alt="" coords="907,94,417,114,416,109,907,89"/>
<area shape="rect" href="class_base_external_account_client.html#a8caad074ecc8066c195db462a1632828" title=" " alt="" coords="464,37,645,78"/>
<area shape="poly" title=" " alt="" coords="678,60,646,60,646,55,678,55"/>
<area shape="rect" href="class_base_external_account_client.html#a0e5c9c1ea4ac4463c04a9bdeb9e3fc41" title=" " alt="" coords="235,5,416,46"/>
<area shape="poly" title=" " alt="" coords="448,46,416,41,417,36,449,40"/>
<area shape="poly" title=" " alt="" coords="457,85,410,97,409,91,455,80"/>
<area shape="poly" title=" " alt="" coords="363,82,349,76,325,73,303,75,290,80,285,86,287,93,282,95,280,85,287,76,302,70,325,68,350,70,365,77"/>
<area shape="rect" href="class_base_external_account_client.html#ab381dadac9ad3b6e8c34f194714c9cc3" title=" " alt="" coords="5,95,187,135"/>
<area shape="poly" title=" " alt="" coords="219,118,187,118,187,112,219,112"/>
</map>
</div>

</div>
</div>
<a id="ab381dadac9ad3b6e8c34f194714c9cc3" name="ab381dadac9ad3b6e8c34f194714c9cc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab381dadac9ad3b6e8c34f194714c9cc3">&#9670;&#160;</a></span>request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BaseExternalAccountClient::request </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>opts</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>callback</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="database-compat_2dist_2index_8standalone_8js.html#a622460feeccdab6d8f307936fc6b36fb">callback</a>, <a class="el" href="firestore__admin__v1__proto__api_8js.html#a08a4415e9d594ff960030b921d42b91e">e</a>, <a class="el" href="uuid_8min_8js.html#aaa5fef39529cdffdfa257202bb4fda9f">r</a>, and <a class="el" href="#a9050d118276189d24a16ce5928a28335">requestAsync()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_base_external_account_client_ab381dadac9ad3b6e8c34f194714c9cc3_cgraph.png" border="0" usemap="#aclass_base_external_account_client_ab381dadac9ad3b6e8c34f194714c9cc3_cgraph" alt=""/></div>
<map name="aclass_base_external_account_client_ab381dadac9ad3b6e8c34f194714c9cc3_cgraph" id="aclass_base_external_account_client_ab381dadac9ad3b6e8c34f194714c9cc3_cgraph">
<area shape="rect" title=" " alt="" coords="5,71,187,111"/>
<area shape="rect" href="class_base_external_account_client.html#a9050d118276189d24a16ce5928a28335" title=" " alt="" coords="235,71,416,111"/>
<area shape="poly" title=" " alt="" coords="187,88,219,88,219,94,187,94"/>
<area shape="poly" title=" " alt="" coords="282,71,280,61,287,52,302,46,325,44,350,46,365,53,363,58,349,52,325,49,303,51,290,56,285,62,287,69"/>
<area shape="rect" href="class_base_external_account_client.html#a8caad074ecc8066c195db462a1632828" title=" " alt="" coords="464,13,645,54"/>
<area shape="poly" title=" " alt="" coords="408,68,455,56,456,61,410,73"/>
<area shape="rect" href="class_base_external_account_client.html#a7cbb6f741d620990412edb466f7c3e57" title=" " alt="" coords="923,71,1108,111"/>
<area shape="poly" title=" " alt="" coords="417,88,907,88,907,94,417,94"/>
<area shape="rect" href="cjs_2internal_2ajax_2ajax_8js.html#a45744f6308afbbcefdd2479b2c4bd5c5" title=" " alt="" coords="490,129,619,154"/>
<area shape="poly" title=" " alt="" coords="417,108,479,122,478,127,416,114"/>
<area shape="rect" href="class_base_external_account_client.html#ad0804062ac1325329b9f76ac603ac74c" title=" " alt="" coords="693,13,875,54"/>
<area shape="poly" title=" " alt="" coords="646,31,678,31,678,36,646,36"/>
<area shape="rect" href="class_base_external_account_client.html#ada53ec42a80860f6e777d00cd501e20d" title=" " alt="" coords="925,5,1106,46"/>
<area shape="poly" title=" " alt="" coords="875,28,909,27,909,32,875,33"/>
<area shape="poly" title=" " alt="" coords="869,52,916,64,915,69,868,57"/>
</map>
</div>

</div>
</div>
<a id="a9050d118276189d24a16ce5928a28335" name="a9050d118276189d24a16ce5928a28335"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9050d118276189d24a16ce5928a28335">&#9670;&#160;</a></span>requestAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="util_2dist_2index_8cjs_8js.html#af516a86cc3f563f4c12f98f31f1e2e57">async</a> BaseExternalAccountClient::requestAsync </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>opts</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>reAuthRetried</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="database-compat_2dist_2index_8standalone_8js.html#a5df37b7f02e5cdc7d9412b7f872b8e01">false</a></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Authenticates the provided HTTP request, processes it and resolves with the returned response. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">opts</td><td>The HTTP request options. </td></tr>
    <tr><td class="paramname">reAuthRetried</td><td>Whether the current attempt is a retry after a failed attempt due to an auth failure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_a.html">A</a> promise that resolves with the successful response. </dd></dl>

<p class="reference">References <a class="el" href="firestore__admin__v1__proto__api_8js.html#a08a4415e9d594ff960030b921d42b91e">e</a>, <a class="el" href="#a8caad074ecc8066c195db462a1632828">getRequestHeaders()</a>, <a class="el" href="cjs_2internal_2ajax_2ajax_8js.html#a45744f6308afbbcefdd2479b2c4bd5c5">isReadableStream()</a>, <a class="el" href="#a7cbb6f741d620990412edb466f7c3e57">refreshAccessTokenAsync()</a>, <a class="el" href="#a9050d118276189d24a16ce5928a28335">requestAsync()</a>, <a class="el" href="express_2lib_2express_8js.html#abde3c35e3bb7e5225dd7f234c685329c">res</a>, <a class="el" href="database-compat_2dist_2index_8standalone_8js.html#ac70ac40ef8199c59316b35022dd21914">response</a>, and <a class="el" href="baseexternalclient_8js.html#ae3aac9dcd83d0a6524a3db7f78ecdce3">stream</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_base_external_account_client_a9050d118276189d24a16ce5928a28335_cgraph.png" border="0" usemap="#aclass_base_external_account_client_a9050d118276189d24a16ce5928a28335_cgraph" alt=""/></div>
<map name="aclass_base_external_account_client_a9050d118276189d24a16ce5928a28335_cgraph" id="aclass_base_external_account_client_a9050d118276189d24a16ce5928a28335_cgraph">
<area shape="rect" title=" " alt="" coords="5,71,187,111"/>
<area shape="poly" title=" " alt="" coords="53,71,51,61,58,52,73,46,96,44,121,46,136,53,133,58,119,52,96,49,74,51,61,56,56,62,58,69"/>
<area shape="rect" href="class_base_external_account_client.html#a8caad074ecc8066c195db462a1632828" title=" " alt="" coords="235,13,416,54"/>
<area shape="poly" title=" " alt="" coords="179,68,226,56,227,61,180,73"/>
<area shape="rect" href="class_base_external_account_client.html#a7cbb6f741d620990412edb466f7c3e57" title=" " alt="" coords="693,71,879,111"/>
<area shape="poly" title=" " alt="" coords="187,88,678,88,678,94,187,94"/>
<area shape="rect" href="cjs_2internal_2ajax_2ajax_8js.html#a45744f6308afbbcefdd2479b2c4bd5c5" title=" " alt="" coords="261,129,390,154"/>
<area shape="poly" title=" " alt="" coords="187,108,249,122,248,127,186,114"/>
<area shape="rect" href="class_base_external_account_client.html#ad0804062ac1325329b9f76ac603ac74c" title=" " alt="" coords="464,13,645,54"/>
<area shape="poly" title=" " alt="" coords="416,31,449,31,449,36,416,36"/>
<area shape="rect" href="class_base_external_account_client.html#ada53ec42a80860f6e777d00cd501e20d" title=" " alt="" coords="695,5,877,46"/>
<area shape="poly" title=" " alt="" coords="646,28,679,27,680,32,646,33"/>
<area shape="poly" title=" " alt="" coords="640,52,687,64,686,69,639,57"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_base_external_account_client_a9050d118276189d24a16ce5928a28335_icgraph.png" border="0" usemap="#aclass_base_external_account_client_a9050d118276189d24a16ce5928a28335_icgraph" alt=""/></div>
<map name="aclass_base_external_account_client_a9050d118276189d24a16ce5928a28335_icgraph" id="aclass_base_external_account_client_a9050d118276189d24a16ce5928a28335_icgraph">
<area shape="rect" title=" " alt="" coords="235,29,416,70"/>
<area shape="poly" title=" " alt="" coords="363,16,349,10,325,8,303,10,290,15,285,21,287,28,282,29,280,19,287,10,302,5,325,3,350,5,365,11"/>
<area shape="rect" href="class_base_external_account_client.html#ab381dadac9ad3b6e8c34f194714c9cc3" title=" " alt="" coords="5,29,187,70"/>
<area shape="poly" title=" " alt="" coords="219,52,187,52,187,47,219,47"/>
</map>
</div>

</div>
</div>
<a id="a401d8ae5c66bc97c2c032f7e750d32cb" name="a401d8ae5c66bc97c2c032f7e750d32cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a401d8ae5c66bc97c2c032f7e750d32cb">&#9670;&#160;</a></span>setCredentials()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BaseExternalAccountClient::setCredentials </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>credentials</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Provides a mechanism to inject GCP access tokens directly. When the provided credential expires, a new credential, using the external account options, is retrieved. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">credentials</td><td>The Credentials object to set on the current client. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="_0dgrpc_2grpc-js_2build_2src_2index_8js.html#a88f1ca34064fef6dc1e29d7d1cf5cfcf">credentials</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>backend/node_modules/google-auth-library/build/src/auth/<a class="el" href="baseexternalclient_8js.html">baseexternalclient.js</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_base_external_account_client.html">BaseExternalAccountClient</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
