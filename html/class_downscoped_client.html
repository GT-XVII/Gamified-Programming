<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: DownscopedClient Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('class_downscoped_client.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_downscoped_client-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">DownscopedClient Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for DownscopedClient:</div>
<div class="dyncontent">
<div class="center"><img src="class_downscoped_client__inherit__graph.png" border="0" usemap="#a_downscoped_client_inherit__map" alt="Inheritance graph"/></div>
<map name="a_downscoped_client_inherit__map" id="a_downscoped_client_inherit__map">
<area shape="rect" title=" " alt="" coords="5,120,193,328"/>
<area shape="rect" title=" " alt="" coords="24,5,174,72"/>
<area shape="poly" title=" " alt="" coords="102,87,102,120,97,120,97,87"/>
</map>
</div>
<div class="dynheader">
Collaboration diagram for DownscopedClient:</div>
<div class="dyncontent">
<div class="center"><img src="class_downscoped_client__coll__graph.png" border="0" usemap="#a_downscoped_client_coll__map" alt="Collaboration graph"/></div>
<map name="a_downscoped_client_coll__map" id="a_downscoped_client_coll__map">
<area shape="rect" title=" " alt="" coords="5,120,193,328"/>
<area shape="rect" title=" " alt="" coords="24,5,174,72"/>
<area shape="poly" title=" " alt="" coords="102,87,102,120,97,120,97,87"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a114d5da4fd2ae44058441c0f77142675" id="r_a114d5da4fd2ae44058441c0f77142675"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a114d5da4fd2ae44058441c0f77142675">constructor</a> (authClient, credentialAccessBoundary, additionalOptions, quotaProjectId)</td></tr>
<tr class="separator:a114d5da4fd2ae44058441c0f77142675"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4f3dcaf85a70004c7c3731423abc938" id="r_aa4f3dcaf85a70004c7c3731423abc938"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa4f3dcaf85a70004c7c3731423abc938">setCredentials</a> (<a class="el" href="_0dgrpc_2grpc-js_2build_2src_2index_8js.html#a88f1ca34064fef6dc1e29d7d1cf5cfcf">credentials</a>)</td></tr>
<tr class="separator:aa4f3dcaf85a70004c7c3731423abc938"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a571e5a1011136479ad16463cd74c77cf" id="r_a571e5a1011136479ad16463cd74c77cf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="util_2dist_2index_8cjs_8js.html#af516a86cc3f563f4c12f98f31f1e2e57">async</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a571e5a1011136479ad16463cd74c77cf">getAccessToken</a> ()</td></tr>
<tr class="separator:a571e5a1011136479ad16463cd74c77cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6082bacd6db45ecf8f6bb92b7513a1f8" id="r_a6082bacd6db45ecf8f6bb92b7513a1f8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="util_2dist_2index_8cjs_8js.html#af516a86cc3f563f4c12f98f31f1e2e57">async</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6082bacd6db45ecf8f6bb92b7513a1f8">getRequestHeaders</a> ()</td></tr>
<tr class="separator:a6082bacd6db45ecf8f6bb92b7513a1f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2a791fe5fdd6375d028e117c92d6dcf" id="r_ac2a791fe5fdd6375d028e117c92d6dcf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac2a791fe5fdd6375d028e117c92d6dcf">request</a> (opts, <a class="el" href="database-compat_2dist_2index_8standalone_8js.html#a622460feeccdab6d8f307936fc6b36fb">callback</a>)</td></tr>
<tr class="separator:ac2a791fe5fdd6375d028e117c92d6dcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a402a18e315105a2d8f476d53b917b946" id="r_a402a18e315105a2d8f476d53b917b946"><td class="memItemLeft" align="right" valign="top"><a class="el" href="util_2dist_2index_8cjs_8js.html#af516a86cc3f563f4c12f98f31f1e2e57">async</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a402a18e315105a2d8f476d53b917b946">requestAsync</a> (opts, reAuthRetried=<a class="el" href="database-compat_2dist_2index_8standalone_8js.html#a5df37b7f02e5cdc7d9412b7f872b8e01">false</a>)</td></tr>
<tr class="separator:a402a18e315105a2d8f476d53b917b946"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad98aae2e6619b36e3078e591348d432e" id="r_ad98aae2e6619b36e3078e591348d432e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="util_2dist_2index_8cjs_8js.html#af516a86cc3f563f4c12f98f31f1e2e57">async</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad98aae2e6619b36e3078e591348d432e">refreshAccessTokenAsync</a> ()</td></tr>
<tr class="separator:ad98aae2e6619b36e3078e591348d432e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bb5b4957b8c83e505fc99f0da720ebe" id="r_a2bb5b4957b8c83e505fc99f0da720ebe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2bb5b4957b8c83e505fc99f0da720ebe">isExpired</a> (downscopedAccessToken)</td></tr>
<tr class="separator:a2bb5b4957b8c83e505fc99f0da720ebe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Defines a set of Google credentials that are downscoped from an existing set of Google OAuth2 credentials. This is useful to restrict the Identity and Access Management (IAM) permissions that a short-lived credential can use. The common pattern of usage is to have a token broker with elevated access generate these downscoped credentials from higher access source credentials and pass the downscoped short-lived access tokens to a token consumer via some secure authenticated channel for limited access to Google Cloud <a class="el" href="class_storage.html">Storage</a> resources. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a114d5da4fd2ae44058441c0f77142675" name="a114d5da4fd2ae44058441c0f77142675"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a114d5da4fd2ae44058441c0f77142675">&#9670;&#160;</a></span>constructor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">DownscopedClient::constructor </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>authClient</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>credentialAccessBoundary</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>additionalOptions</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>quotaProjectId</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Instantiates a downscoped client object using the provided source <a class="el" href="class_auth_client.html">AuthClient</a> and credential access boundary rules. To downscope permissions of a source <a class="el" href="class_auth_client.html">AuthClient</a>, a Credential Access Boundary that specifies which resources the new credential can access, as well as an upper bound on the permissions that are available on each resource, has to be defined. <a class="el" href="class_a.html">A</a> downscoped client can then be instantiated using the source <a class="el" href="class_auth_client.html">AuthClient</a> and the Credential Access Boundary. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">authClient</td><td>The source <a class="el" href="class_auth_client.html">AuthClient</a> to be downscoped based on the provided Credential Access Boundary rules. </td></tr>
    <tr><td class="paramname">credentialAccessBoundary</td><td>The Credential Access Boundary which contains a list of access boundary rules. Each rule contains information on the resource that the rule applies to, the upper bound of the permissions that are available on that resource and an optional condition to further restrict permissions. </td></tr>
    <tr><td class="paramname">additionalOptions</td><td><b>DEPRECATED, set this in the provided <code>authClient</code>.</b> Optional additional behavior customization options. </td></tr>
    <tr><td class="paramname">quotaProjectId</td><td><b>DEPRECATED, set this in the provided <code>authClient</code>.</b> Optional quota project id for setting up in the x-goog-user-project header. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="form_8js.html#ab63a7754967c678e14c9ece9cf96be37">$</a>, <a class="el" href="database-compat_2dist_2index_8standalone_8js.html#aa4072ba4b6b56b0fb6f4801f17ab2b34">exports</a>, <a class="el" href="agent-base_2dist_2helpers_8js.html#ab3093f9d8507c035b404b9d49bdb40f7">https</a>, <a class="el" href="cjs_2internal_2observable_2of_8js.html#afd9e33601da8812842c6288b48c17f0a">of</a>, and <a class="el" href="downscopedclient_8js.html#aed84e6a8dd47163697d602a45f4cf675">sts</a>.</p>

</div>
</div>
<a id="a571e5a1011136479ad16463cd74c77cf" name="a571e5a1011136479ad16463cd74c77cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a571e5a1011136479ad16463cd74c77cf">&#9670;&#160;</a></span>getAccessToken()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="util_2dist_2index_8cjs_8js.html#af516a86cc3f563f4c12f98f31f1e2e57">async</a> DownscopedClient::getAccessToken </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="#a2bb5b4957b8c83e505fc99f0da720ebe">isExpired()</a>, <a class="el" href="#ad98aae2e6619b36e3078e591348d432e">refreshAccessTokenAsync()</a>, <a class="el" href="express_2lib_2express_8js.html#abde3c35e3bb7e5225dd7f234c685329c">res</a>, and <a class="el" href="util_2dist_2index_8cjs_8js.html#a87da3d8264af1c9427605148f20dd9c4">token</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_downscoped_client_a571e5a1011136479ad16463cd74c77cf_cgraph.png" border="0" usemap="#aclass_downscoped_client_a571e5a1011136479ad16463cd74c77cf_cgraph" alt=""/></div>
<map name="aclass_downscoped_client_a571e5a1011136479ad16463cd74c77cf_cgraph" id="aclass_downscoped_client_a571e5a1011136479ad16463cd74c77cf_cgraph">
<area shape="rect" title=" " alt="" coords="5,27,207,68"/>
<area shape="rect" href="class_downscoped_client.html#a2bb5b4957b8c83e505fc99f0da720ebe" title=" " alt="" coords="255,5,448,31"/>
<area shape="poly" title=" " alt="" coords="207,33,239,29,239,34,207,38"/>
<area shape="rect" href="class_downscoped_client.html#ad98aae2e6619b36e3078e591348d432e" title=" " alt="" coords="262,55,441,96"/>
<area shape="poly" title=" " alt="" coords="207,56,246,61,246,66,207,62"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_downscoped_client_a571e5a1011136479ad16463cd74c77cf_icgraph.png" border="0" usemap="#aclass_downscoped_client_a571e5a1011136479ad16463cd74c77cf_icgraph" alt=""/></div>
<map name="aclass_downscoped_client_a571e5a1011136479ad16463cd74c77cf_icgraph" id="aclass_downscoped_client_a571e5a1011136479ad16463cd74c77cf_icgraph">
<area shape="rect" title=" " alt="" coords="720,29,922,70"/>
<area shape="rect" href="class_downscoped_client.html#a6082bacd6db45ecf8f6bb92b7513a1f8" title=" " alt="" coords="466,29,672,70"/>
<area shape="poly" title=" " alt="" coords="704,52,673,52,673,47,704,47"/>
<area shape="rect" href="class_downscoped_client.html#a402a18e315105a2d8f476d53b917b946" title=" " alt="" coords="236,29,418,70"/>
<area shape="poly" title=" " alt="" coords="450,52,418,52,418,47,450,47"/>
<area shape="poly" title=" " alt="" coords="364,16,350,10,327,8,305,10,292,15,286,21,289,28,283,29,281,19,288,10,304,5,327,3,352,5,366,11"/>
<area shape="rect" href="class_downscoped_client.html#ac2a791fe5fdd6375d028e117c92d6dcf" title=" " alt="" coords="5,37,188,62"/>
<area shape="poly" title=" " alt="" coords="220,52,188,52,188,47,220,47"/>
</map>
</div>

</div>
</div>
<a id="a6082bacd6db45ecf8f6bb92b7513a1f8" name="a6082bacd6db45ecf8f6bb92b7513a1f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6082bacd6db45ecf8f6bb92b7513a1f8">&#9670;&#160;</a></span>getRequestHeaders()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="util_2dist_2index_8cjs_8js.html#af516a86cc3f563f4c12f98f31f1e2e57">async</a> DownscopedClient::getRequestHeaders </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The main authentication interface. It takes an optional url which when present is the endpoint being accessed, and returns a Promise which resolves with authorization header fields.</p>
<p>The result has the form: { Authorization: 'Bearer &lt;access_token_value&gt;' } </p>

<p class="reference">References <a class="el" href="form_8js.html#ab63a7754967c678e14c9ece9cf96be37">$</a>, <a class="el" href="#a571e5a1011136479ad16463cd74c77cf">getAccessToken()</a>, and <a class="el" href="database-compat_2dist_2index_8standalone_8js.html#a7f2cb2fcdd79bf72cefd29b7bc2d10fa">headers</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_downscoped_client_a6082bacd6db45ecf8f6bb92b7513a1f8_cgraph.png" border="0" usemap="#aclass_downscoped_client_a6082bacd6db45ecf8f6bb92b7513a1f8_cgraph" alt=""/></div>
<map name="aclass_downscoped_client_a6082bacd6db45ecf8f6bb92b7513a1f8_cgraph" id="aclass_downscoped_client_a6082bacd6db45ecf8f6bb92b7513a1f8_cgraph">
<area shape="rect" title=" " alt="" coords="5,27,212,68"/>
<area shape="rect" href="class_downscoped_client.html#a571e5a1011136479ad16463cd74c77cf" title=" " alt="" coords="260,27,461,68"/>
<area shape="poly" title=" " alt="" coords="212,45,244,45,244,50,212,50"/>
<area shape="rect" href="class_downscoped_client.html#a2bb5b4957b8c83e505fc99f0da720ebe" title=" " alt="" coords="509,5,702,31"/>
<area shape="poly" title=" " alt="" coords="461,33,493,29,494,34,462,38"/>
<area shape="rect" href="class_downscoped_client.html#ad98aae2e6619b36e3078e591348d432e" title=" " alt="" coords="516,55,695,96"/>
<area shape="poly" title=" " alt="" coords="462,56,501,61,500,66,461,62"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_downscoped_client_a6082bacd6db45ecf8f6bb92b7513a1f8_icgraph.png" border="0" usemap="#aclass_downscoped_client_a6082bacd6db45ecf8f6bb92b7513a1f8_icgraph" alt=""/></div>
<map name="aclass_downscoped_client_a6082bacd6db45ecf8f6bb92b7513a1f8_icgraph" id="aclass_downscoped_client_a6082bacd6db45ecf8f6bb92b7513a1f8_icgraph">
<area shape="rect" title=" " alt="" coords="466,29,672,70"/>
<area shape="rect" href="class_downscoped_client.html#a402a18e315105a2d8f476d53b917b946" title=" " alt="" coords="236,29,418,70"/>
<area shape="poly" title=" " alt="" coords="450,52,418,52,418,47,450,47"/>
<area shape="poly" title=" " alt="" coords="364,16,350,10,327,8,305,10,292,15,286,21,289,28,283,29,281,19,288,10,304,5,327,3,352,5,366,11"/>
<area shape="rect" href="class_downscoped_client.html#ac2a791fe5fdd6375d028e117c92d6dcf" title=" " alt="" coords="5,37,188,62"/>
<area shape="poly" title=" " alt="" coords="220,52,188,52,188,47,220,47"/>
</map>
</div>

</div>
</div>
<a id="a2bb5b4957b8c83e505fc99f0da720ebe" name="a2bb5b4957b8c83e505fc99f0da720ebe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bb5b4957b8c83e505fc99f0da720ebe">&#9670;&#160;</a></span>isExpired()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">DownscopedClient::isExpired </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>downscopedAccessToken</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns whether the provided credentials are expired or not. If there is no expiry time, assumes the token is not expired or expiring. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">downscopedAccessToken</td><td>The credentials to check for expiration. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Whether the credentials are expired or not. </dd></dl>

<p class="reference">References <a class="el" href="lodash_2debounce_8js.html#ae2dc5120e9ccb39c5ef94d5c203e534a">now</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_downscoped_client_a2bb5b4957b8c83e505fc99f0da720ebe_icgraph.png" border="0" usemap="#aclass_downscoped_client_a2bb5b4957b8c83e505fc99f0da720ebe_icgraph" alt=""/></div>
<map name="aclass_downscoped_client_a2bb5b4957b8c83e505fc99f0da720ebe_icgraph" id="aclass_downscoped_client_a2bb5b4957b8c83e505fc99f0da720ebe_icgraph">
<area shape="rect" title=" " alt="" coords="970,37,1163,62"/>
<area shape="rect" href="class_downscoped_client.html#a571e5a1011136479ad16463cd74c77cf" title=" " alt="" coords="720,29,922,70"/>
<area shape="poly" title=" " alt="" coords="954,52,922,52,922,47,954,47"/>
<area shape="rect" href="class_downscoped_client.html#a6082bacd6db45ecf8f6bb92b7513a1f8" title=" " alt="" coords="466,29,672,70"/>
<area shape="poly" title=" " alt="" coords="704,52,673,52,673,47,704,47"/>
<area shape="rect" href="class_downscoped_client.html#a402a18e315105a2d8f476d53b917b946" title=" " alt="" coords="236,29,418,70"/>
<area shape="poly" title=" " alt="" coords="450,52,418,52,418,47,450,47"/>
<area shape="poly" title=" " alt="" coords="364,16,350,10,327,8,305,10,292,15,286,21,289,28,283,29,281,19,288,10,304,5,327,3,352,5,366,11"/>
<area shape="rect" href="class_downscoped_client.html#ac2a791fe5fdd6375d028e117c92d6dcf" title=" " alt="" coords="5,37,188,62"/>
<area shape="poly" title=" " alt="" coords="220,52,188,52,188,47,220,47"/>
</map>
</div>

</div>
</div>
<a id="ad98aae2e6619b36e3078e591348d432e" name="ad98aae2e6619b36e3078e591348d432e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad98aae2e6619b36e3078e591348d432e">&#9670;&#160;</a></span>refreshAccessTokenAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="util_2dist_2index_8cjs_8js.html#af516a86cc3f563f4c12f98f31f1e2e57">async</a> DownscopedClient::refreshAccessTokenAsync </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Forces token refresh, even if unexpired tokens are currently cached. GCP access tokens are retrieved from authclient object/source credential. Then GCP access tokens are exchanged for downscoped access tokens via the token exchange endpoint. </p><dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_a.html">A</a> promise that resolves with the fresh downscoped access token. </dd></dl>
<p>The STS endpoint will only return the expiration time for the downscoped access token if the original access token represents a service account. The downscoped token's expiration time will always match the source credential expiration. When no expires_in is returned, we can copy the source credential's expiration time.</p>

<p class="reference">References <a class="el" href="logger_2dist_2esm_2index_8esm5_8js.html#a0adf123df8967a14b5bdd9ff3bbe2d0c">_a</a>, <a class="el" href="_0dgrpc_2grpc-js_2build_2src_2index_8js.html#a88f1ca34064fef6dc1e29d7d1cf5cfcf">credentials</a>, <a class="el" href="_0dprotobufjs_2eventemitter_2index_8js.html#a16439605b9cd7bd34fdbf935bef49de6">emit</a>, <a class="el" href="express_2lib_2express_8js.html#abde3c35e3bb7e5225dd7f234c685329c">res</a>, <a class="el" href="downscopedclient_8js.html#a9e961b123750db457d1dfdd601a5922f">STS_GRANT_TYPE</a>, <a class="el" href="downscopedclient_8js.html#abd38bae0d786fc063e9e0870dd3c3cb7">STS_REQUEST_TOKEN_TYPE</a>, <a class="el" href="downscopedclient_8js.html#ac3b42142a5129403d0e7c36000d47234">STS_SUBJECT_TOKEN_TYPE</a>, and <a class="el" href="get-intrinsic_2index_8js.html#ae6aa4817f0f49345b718ea6b4abae197">undefined</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_downscoped_client_ad98aae2e6619b36e3078e591348d432e_icgraph.png" border="0" usemap="#aclass_downscoped_client_ad98aae2e6619b36e3078e591348d432e_icgraph" alt=""/></div>
<map name="aclass_downscoped_client_ad98aae2e6619b36e3078e591348d432e_icgraph" id="aclass_downscoped_client_ad98aae2e6619b36e3078e591348d432e_icgraph">
<area shape="rect" title=" " alt="" coords="970,35,1149,75"/>
<area shape="rect" href="class_downscoped_client.html#a571e5a1011136479ad16463cd74c77cf" title=" " alt="" coords="720,5,922,46"/>
<area shape="poly" title=" " alt="" coords="954,45,922,41,922,35,955,39"/>
<area shape="rect" href="class_downscoped_client.html#a402a18e315105a2d8f476d53b917b946" title=" " alt="" coords="236,35,418,75"/>
<area shape="poly" title=" " alt="" coords="954,60,922,60,466,60,419,60,419,54,466,55,922,55,954,55"/>
<area shape="rect" href="class_downscoped_client.html#a6082bacd6db45ecf8f6bb92b7513a1f8" title=" " alt="" coords="466,5,672,46"/>
<area shape="poly" title=" " alt="" coords="704,28,673,28,673,23,704,23"/>
<area shape="poly" title=" " alt="" coords="451,43,419,47,418,41,450,37"/>
<area shape="poly" title=" " alt="" coords="364,22,350,16,327,13,305,15,292,20,286,26,289,33,283,35,281,25,288,16,304,10,327,8,352,10,366,17"/>
<area shape="rect" href="class_downscoped_client.html#ac2a791fe5fdd6375d028e117c92d6dcf" title=" " alt="" coords="5,42,188,68"/>
<area shape="poly" title=" " alt="" coords="220,58,188,58,188,52,220,52"/>
</map>
</div>

</div>
</div>
<a id="ac2a791fe5fdd6375d028e117c92d6dcf" name="ac2a791fe5fdd6375d028e117c92d6dcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2a791fe5fdd6375d028e117c92d6dcf">&#9670;&#160;</a></span>request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">DownscopedClient::request </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>opts</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>callback</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="database-compat_2dist_2index_8standalone_8js.html#a622460feeccdab6d8f307936fc6b36fb">callback</a>, <a class="el" href="firestore__admin__v1__proto__api_8js.html#a08a4415e9d594ff960030b921d42b91e">e</a>, <a class="el" href="uuid_8min_8js.html#aaa5fef39529cdffdfa257202bb4fda9f">r</a>, and <a class="el" href="#a402a18e315105a2d8f476d53b917b946">requestAsync()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_downscoped_client_ac2a791fe5fdd6375d028e117c92d6dcf_cgraph.png" border="0" usemap="#aclass_downscoped_client_ac2a791fe5fdd6375d028e117c92d6dcf_cgraph" alt=""/></div>
<map name="aclass_downscoped_client_ac2a791fe5fdd6375d028e117c92d6dcf_cgraph" id="aclass_downscoped_client_ac2a791fe5fdd6375d028e117c92d6dcf_cgraph">
<area shape="rect" title=" " alt="" coords="5,70,188,96"/>
<area shape="rect" href="class_downscoped_client.html#a402a18e315105a2d8f476d53b917b946" title=" " alt="" coords="236,63,418,103"/>
<area shape="poly" title=" " alt="" coords="188,80,220,80,220,86,188,86"/>
<area shape="poly" title=" " alt="" coords="283,63,281,53,288,44,304,38,327,36,352,38,366,45,364,50,350,44,327,41,305,43,292,48,286,54,289,61"/>
<area shape="rect" href="class_downscoped_client.html#a6082bacd6db45ecf8f6bb92b7513a1f8" title=" " alt="" coords="466,5,672,46"/>
<area shape="poly" title=" " alt="" coords="415,59,465,48,466,53,416,65"/>
<area shape="rect" href="class_downscoped_client.html#ad98aae2e6619b36e3078e591348d432e" title=" " alt="" coords="977,63,1156,103"/>
<area shape="poly" title=" " alt="" coords="419,80,961,80,961,86,419,86"/>
<area shape="rect" href="cjs_2internal_2ajax_2ajax_8js.html#a45744f6308afbbcefdd2479b2c4bd5c5" title=" " alt="" coords="505,121,633,146"/>
<area shape="poly" title=" " alt="" coords="419,99,490,115,489,120,418,105"/>
<area shape="rect" href="class_downscoped_client.html#a571e5a1011136479ad16463cd74c77cf" title=" " alt="" coords="720,5,922,46"/>
<area shape="poly" title=" " alt="" coords="673,23,705,23,705,28,673,28"/>
<area shape="rect" href="class_downscoped_client.html#a2bb5b4957b8c83e505fc99f0da720ebe" title=" " alt="" coords="970,13,1163,38"/>
<area shape="poly" title=" " alt="" coords="922,23,954,23,954,28,922,28"/>
<area shape="poly" title=" " alt="" coords="912,44,962,56,961,61,910,49"/>
</map>
</div>

</div>
</div>
<a id="a402a18e315105a2d8f476d53b917b946" name="a402a18e315105a2d8f476d53b917b946"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a402a18e315105a2d8f476d53b917b946">&#9670;&#160;</a></span>requestAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="util_2dist_2index_8cjs_8js.html#af516a86cc3f563f4c12f98f31f1e2e57">async</a> DownscopedClient::requestAsync </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>opts</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>reAuthRetried</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="database-compat_2dist_2index_8standalone_8js.html#a5df37b7f02e5cdc7d9412b7f872b8e01">false</a></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Authenticates the provided HTTP request, processes it and resolves with the returned response. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">opts</td><td>The HTTP request options. </td></tr>
    <tr><td class="paramname">reAuthRetried</td><td>Whether the current attempt is a retry after a failed attempt due to an auth failure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_a.html">A</a> promise that resolves with the successful response. </dd></dl>

<p class="reference">References <a class="el" href="firestore__admin__v1__proto__api_8js.html#a08a4415e9d594ff960030b921d42b91e">e</a>, <a class="el" href="#a6082bacd6db45ecf8f6bb92b7513a1f8">getRequestHeaders()</a>, <a class="el" href="cjs_2internal_2ajax_2ajax_8js.html#a45744f6308afbbcefdd2479b2c4bd5c5">isReadableStream()</a>, <a class="el" href="#ad98aae2e6619b36e3078e591348d432e">refreshAccessTokenAsync()</a>, <a class="el" href="#a402a18e315105a2d8f476d53b917b946">requestAsync()</a>, <a class="el" href="express_2lib_2express_8js.html#abde3c35e3bb7e5225dd7f234c685329c">res</a>, <a class="el" href="database-compat_2dist_2index_8standalone_8js.html#ac70ac40ef8199c59316b35022dd21914">response</a>, and <a class="el" href="downscopedclient_8js.html#ae3aac9dcd83d0a6524a3db7f78ecdce3">stream</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_downscoped_client_a402a18e315105a2d8f476d53b917b946_cgraph.png" border="0" usemap="#aclass_downscoped_client_a402a18e315105a2d8f476d53b917b946_cgraph" alt=""/></div>
<map name="aclass_downscoped_client_a402a18e315105a2d8f476d53b917b946_cgraph" id="aclass_downscoped_client_a402a18e315105a2d8f476d53b917b946_cgraph">
<area shape="rect" title=" " alt="" coords="5,63,188,103"/>
<area shape="poly" title=" " alt="" coords="51,63,49,53,56,44,72,38,97,36,123,38,138,45,136,50,121,44,96,41,73,43,59,48,54,54,56,61"/>
<area shape="rect" href="class_downscoped_client.html#a6082bacd6db45ecf8f6bb92b7513a1f8" title=" " alt="" coords="236,5,442,46"/>
<area shape="poly" title=" " alt="" coords="185,59,235,48,236,53,186,65"/>
<area shape="rect" href="class_downscoped_client.html#ad98aae2e6619b36e3078e591348d432e" title=" " alt="" coords="746,63,926,103"/>
<area shape="poly" title=" " alt="" coords="188,80,731,80,731,86,188,86"/>
<area shape="rect" href="cjs_2internal_2ajax_2ajax_8js.html#a45744f6308afbbcefdd2479b2c4bd5c5" title=" " alt="" coords="275,121,403,146"/>
<area shape="poly" title=" " alt="" coords="189,99,260,115,259,120,188,105"/>
<area shape="rect" href="class_downscoped_client.html#a571e5a1011136479ad16463cd74c77cf" title=" " alt="" coords="490,5,691,46"/>
<area shape="poly" title=" " alt="" coords="443,23,475,23,475,28,443,28"/>
<area shape="rect" href="class_downscoped_client.html#a2bb5b4957b8c83e505fc99f0da720ebe" title=" " alt="" coords="739,13,933,38"/>
<area shape="poly" title=" " alt="" coords="692,23,724,23,724,28,692,28"/>
<area shape="poly" title=" " alt="" coords="681,44,732,56,731,61,680,49"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_downscoped_client_a402a18e315105a2d8f476d53b917b946_icgraph.png" border="0" usemap="#aclass_downscoped_client_a402a18e315105a2d8f476d53b917b946_icgraph" alt=""/></div>
<map name="aclass_downscoped_client_a402a18e315105a2d8f476d53b917b946_icgraph" id="aclass_downscoped_client_a402a18e315105a2d8f476d53b917b946_icgraph">
<area shape="rect" title=" " alt="" coords="236,29,418,70"/>
<area shape="poly" title=" " alt="" coords="364,16,350,10,327,8,305,10,292,15,286,21,289,28,283,29,281,19,288,10,304,5,327,3,352,5,366,11"/>
<area shape="rect" href="class_downscoped_client.html#ac2a791fe5fdd6375d028e117c92d6dcf" title=" " alt="" coords="5,37,188,62"/>
<area shape="poly" title=" " alt="" coords="220,52,188,52,188,47,220,47"/>
</map>
</div>

</div>
</div>
<a id="aa4f3dcaf85a70004c7c3731423abc938" name="aa4f3dcaf85a70004c7c3731423abc938"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4f3dcaf85a70004c7c3731423abc938">&#9670;&#160;</a></span>setCredentials()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">DownscopedClient::setCredentials </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>credentials</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Provides a mechanism to inject Downscoped access tokens directly. The expiry_date field is required to facilitate determination of the token expiration which would make it easier for the token consumer to handle. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">credentials</td><td>The Credentials object to set on the current client. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="_0dgrpc_2grpc-js_2build_2src_2index_8js.html#a88f1ca34064fef6dc1e29d7d1cf5cfcf">credentials</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>backend/node_modules/google-auth-library/build/src/auth/<a class="el" href="downscopedclient_8js.html">downscopedclient.js</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_downscoped_client.html">DownscopedClient</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
