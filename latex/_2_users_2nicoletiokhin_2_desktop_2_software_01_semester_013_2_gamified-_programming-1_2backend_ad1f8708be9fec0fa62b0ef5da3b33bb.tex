\doxysection{/\+Users/nicoletiokhin/\+Desktop/\+Software Semester 3/\+Gamified-\/\+Programming-\/1/backend/node\+\_\+modules/@google-\/cloud/firestore/build/src/transaction.\+js}
\hypertarget{_2_users_2nicoletiokhin_2_desktop_2_software_01_semester_013_2_gamified-_programming-1_2backend_ad1f8708be9fec0fa62b0ef5da3b33bb}{}\label{_2_users_2nicoletiokhin_2_desktop_2_software_01_semester_013_2_gamified-_programming-1_2backend_ad1f8708be9fec0fa62b0ef5da3b33bb}Retrieve a document or a query result from the database. Holds a pessimistic lock on all returned documents.


\begin{DoxyParams}{Parameters}
{\em \{\+Document\+Reference\texorpdfstring{$\vert$}{|}\+Query\}} & ref\+Or\+Query The document or query to return. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\{Promise\} \doxylink{class_a}{A} Promise that resolves with a \doxylink{class_document_snapshot}{Document\+Snapshot} or \doxylink{class_query_snapshot}{Query\+Snapshot} for the returned documents.
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{firestore-namespace_8js_a6c18541a3018cee632d7e797bb983f36}{firestore}}.runTransaction(transaction\ =>\ \{}
\DoxyCodeLine{\ \ let\ documentRef\ =\ \mbox{\hyperlink{firestore-namespace_8js_a6c18541a3018cee632d7e797bb983f36}{firestore}}.doc(\textcolor{stringliteral}{'col/doc'});}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{return}\ transaction.get(documentRef).then(doc\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{if}\ (doc.exists)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ transaction.update(documentRef,\ \{\ \mbox{\hyperlink{cjs_2internal_2operators_2count_8js_ac88314f55a9398aa7c8da3c0aae90d53}{count}}:\ doc.get(\textcolor{stringliteral}{'count'})\ +\ 1\ \});}
\DoxyCodeLine{\ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\ \ \ \ \ \ transaction.create(documentRef,\ \{\ \mbox{\hyperlink{cjs_2internal_2operators_2count_8js_ac88314f55a9398aa7c8da3c0aae90d53}{count}}:\ 1\ \});}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\ \ \});}
\DoxyCodeLine{\});}

\end{DoxyCode}



\begin{DoxyCodeInclude}{0}

\end{DoxyCodeInclude}
 Semester 3/\+Gamified-\/\+Programming-\/1/backend/node\+\_\+modules/@google\doxylink{transaction_8js}{-\/cloud/firestore/build/src/transaction.\+js} 