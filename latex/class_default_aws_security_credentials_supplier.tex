\doxysection{Default\+Aws\+Security\+Credentials\+Supplier Class Reference}
\hypertarget{class_default_aws_security_credentials_supplier}{}\label{class_default_aws_security_credentials_supplier}\index{DefaultAwsSecurityCredentialsSupplier@{DefaultAwsSecurityCredentialsSupplier}}


Collaboration diagram for Default\+Aws\+Security\+Credentials\+Supplier\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=225pt]{class_default_aws_security_credentials_supplier__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_default_aws_security_credentials_supplier_a4280acc72bb43d1dcc816e9d18a46c4c}{constructor}} (opts)
\item 
\mbox{\hyperlink{util_2dist_2index_8cjs_8js_af516a86cc3f563f4c12f98f31f1e2e57}{async}} \mbox{\hyperlink{class_default_aws_security_credentials_supplier_a1bea45631a4cf154731e911859bd23ea}{get\+Aws\+Region}} (\mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_a2f035fcf2afcfd1521c26d73d7d9de31}{context}})
\item 
\mbox{\hyperlink{util_2dist_2index_8cjs_8js_af516a86cc3f563f4c12f98f31f1e2e57}{async}} \mbox{\hyperlink{class_default_aws_security_credentials_supplier_ad522649c499c985631eb00e3c0221320}{get\+Aws\+Security\+Credentials}} (\mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_a2f035fcf2afcfd1521c26d73d7d9de31}{context}})
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Internal AWS security credentials supplier implementation used by {\ttfamily \doxylink{class_aws_client}{Aws\+Client}} when a credential source is provided instead of a user defined supplier. The logic is summarized as\+:
\begin{DoxyEnumerate}
\item If imdsv2\+\_\+session\+\_\+token\+\_\+url is provided in the credential source, then fetch the aws session token and include it in the headers of the metadata requests. This is a requirement for IDMSv2 but optional for IDMSv1.
\item Retrieve AWS region from availability-\/zone. 3a. Check AWS credentials in environment variables. If not found, get from security-\/credentials endpoint. 3b. Get AWS credentials from security-\/credentials endpoint. In order to retrieve this, the AWS role needs to be determined by calling security-\/credentials endpoint without any argument. Then the credentials can be retrieved via\+: security-\/credentials/role\+\_\+name
\item Generate the signed request to AWS STS Get\+Caller\+Identity action.
\item Inject x-\/goog-\/cloud-\/target-\/resource into header and serialize the signed request. This will be the subject-\/token to pass to GCP STS. 
\end{DoxyEnumerate}

\doxysubsection{Member Function Documentation}
\Hypertarget{class_default_aws_security_credentials_supplier_a4280acc72bb43d1dcc816e9d18a46c4c}\index{DefaultAwsSecurityCredentialsSupplier@{DefaultAwsSecurityCredentialsSupplier}!constructor@{constructor}}
\index{constructor@{constructor}!DefaultAwsSecurityCredentialsSupplier@{DefaultAwsSecurityCredentialsSupplier}}
\doxysubsubsection{\texorpdfstring{constructor()}{constructor()}}
{\footnotesize\ttfamily \label{class_default_aws_security_credentials_supplier_a4280acc72bb43d1dcc816e9d18a46c4c} 
Default\+Aws\+Security\+Credentials\+Supplier\+::constructor (\begin{DoxyParamCaption}\item[{}]{opts}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Instantiates a new \doxylink{class_default_aws_security_credentials_supplier}{Default\+Aws\+Security\+Credentials\+Supplier} using information from the credential\+\_\+source stored in the ADC file. 
\begin{DoxyParams}{Parameters}
{\em opts} & The default aws security credentials supplier options object to build the supplier with. \\
\hline
\end{DoxyParams}


References \mbox{\hyperlink{defaultawssecuritycredentialssupplier_8js_a47d3f52d23e71c67998a519b6a8db532}{\+\_\+\+Default\+Aws\+Security\+Credentials\+Supplier\+\_\+instances}}.

\Hypertarget{class_default_aws_security_credentials_supplier_a1bea45631a4cf154731e911859bd23ea}\index{DefaultAwsSecurityCredentialsSupplier@{DefaultAwsSecurityCredentialsSupplier}!getAwsRegion@{getAwsRegion}}
\index{getAwsRegion@{getAwsRegion}!DefaultAwsSecurityCredentialsSupplier@{DefaultAwsSecurityCredentialsSupplier}}
\doxysubsubsection{\texorpdfstring{getAwsRegion()}{getAwsRegion()}}
{\footnotesize\ttfamily \label{class_default_aws_security_credentials_supplier_a1bea45631a4cf154731e911859bd23ea} 
\mbox{\hyperlink{util_2dist_2index_8cjs_8js_af516a86cc3f563f4c12f98f31f1e2e57}{async}} Default\+Aws\+Security\+Credentials\+Supplier\+::get\+Aws\+Region (\begin{DoxyParamCaption}\item[{}]{context}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Returns the active AWS region. This first checks to see if the region is available as an environment variable. If it is not, then the supplier will call the region URL. 
\begin{DoxyParams}{Parameters}
{\em context} & {\ttfamily \doxylink{}{External\+Account\+Supplier\+Context}} from the calling {\ttfamily \doxylink{class_aws_client}{Aws\+Client}}, contains the requested audience and subject token type for the external account identity. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\doxylink{class_a}{A} promise that resolves with the AWS region string. 
\end{DoxyReturn}


References \mbox{\hyperlink{defaultawssecuritycredentialssupplier_8js_a447cd4ee0c75db2d366d333c1c6ab92b}{\+\_\+\+\_\+class\+Private\+Field\+Get}}, \mbox{\hyperlink{defaultawssecuritycredentialssupplier_8js_a3d6705c76eb60ae620d7f3b5a6dfe382}{\+\_\+\+Default\+Aws\+Security\+Credentials\+Supplier\+\_\+get\+Imds\+V2\+Session\+Token}}, \mbox{\hyperlink{defaultawssecuritycredentialssupplier_8js_a47d3f52d23e71c67998a519b6a8db532}{\+\_\+\+Default\+Aws\+Security\+Credentials\+Supplier\+\_\+instances}}, \mbox{\hyperlink{defaultawssecuritycredentialssupplier_8js_a4e89ee95ab7041dcd000b3340f403d33}{\+\_\+\+Default\+Aws\+Security\+Credentials\+Supplier\+\_\+region\+From\+Env\+\_\+get}}, \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_a2f035fcf2afcfd1521c26d73d7d9de31}{context}}, \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_a7f2cb2fcdd79bf72cefd29b7bc2d10fa}{headers}}, \mbox{\hyperlink{lodash_2method_8js_a2f565198b0a61cb8648a01f0d9617cd7}{method}}, \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_ac70ac40ef8199c59316b35022dd21914}{response}}, and \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_acf0a8b41f00a22e21672c8b3768a0618}{url}}.

\Hypertarget{class_default_aws_security_credentials_supplier_ad522649c499c985631eb00e3c0221320}\index{DefaultAwsSecurityCredentialsSupplier@{DefaultAwsSecurityCredentialsSupplier}!getAwsSecurityCredentials@{getAwsSecurityCredentials}}
\index{getAwsSecurityCredentials@{getAwsSecurityCredentials}!DefaultAwsSecurityCredentialsSupplier@{DefaultAwsSecurityCredentialsSupplier}}
\doxysubsubsection{\texorpdfstring{getAwsSecurityCredentials()}{getAwsSecurityCredentials()}}
{\footnotesize\ttfamily \label{class_default_aws_security_credentials_supplier_ad522649c499c985631eb00e3c0221320} 
\mbox{\hyperlink{util_2dist_2index_8cjs_8js_af516a86cc3f563f4c12f98f31f1e2e57}{async}} Default\+Aws\+Security\+Credentials\+Supplier\+::get\+Aws\+Security\+Credentials (\begin{DoxyParamCaption}\item[{}]{context}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Returns AWS security credentials. This first checks to see if the credentials is available as environment variables. If it is not, then the supplier will call the security credentials URL. 
\begin{DoxyParams}{Parameters}
{\em context} & {\ttfamily \doxylink{}{External\+Account\+Supplier\+Context}} from the calling {\ttfamily \doxylink{class_aws_client}{Aws\+Client}}, contains the requested audience and subject token type for the external account identity. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\doxylink{class_a}{A} promise that resolves with the AWS security credentials. 
\end{DoxyReturn}


References \mbox{\hyperlink{defaultawssecuritycredentialssupplier_8js_a447cd4ee0c75db2d366d333c1c6ab92b}{\+\_\+\+\_\+class\+Private\+Field\+Get}}, \mbox{\hyperlink{defaultawssecuritycredentialssupplier_8js_ae74e694a8c00ad9ef8552cf9fdfe3736}{\+\_\+\+Default\+Aws\+Security\+Credentials\+Supplier\+\_\+get\+Aws\+Role\+Name}}, \mbox{\hyperlink{defaultawssecuritycredentialssupplier_8js_a3d6705c76eb60ae620d7f3b5a6dfe382}{\+\_\+\+Default\+Aws\+Security\+Credentials\+Supplier\+\_\+get\+Imds\+V2\+Session\+Token}}, \mbox{\hyperlink{defaultawssecuritycredentialssupplier_8js_a47d3f52d23e71c67998a519b6a8db532}{\+\_\+\+Default\+Aws\+Security\+Credentials\+Supplier\+\_\+instances}}, \mbox{\hyperlink{defaultawssecuritycredentialssupplier_8js_a72b6c4baea3756c2271082f4bd97d41a}{\+\_\+\+Default\+Aws\+Security\+Credentials\+Supplier\+\_\+retrieve\+Aws\+Security\+Credentials}}, \mbox{\hyperlink{defaultawssecuritycredentialssupplier_8js_a69bf5ec2cdadf210b8c05b2505823413}{\+\_\+\+Default\+Aws\+Security\+Credentials\+Supplier\+\_\+security\+Credentials\+From\+Env\+\_\+get}}, \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_a2f035fcf2afcfd1521c26d73d7d9de31}{context}}, and \mbox{\hyperlink{util_2dist_2index_8cjs_8js_a87da3d8264af1c9427605148f20dd9c4}{token}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
backend/node\+\_\+modules/google-\/auth-\/library/build/src/auth/\mbox{\hyperlink{defaultawssecuritycredentialssupplier_8js}{defaultawssecuritycredentialssupplier.\+js}}\end{DoxyCompactItemize}
