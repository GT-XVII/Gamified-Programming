\doxysection{Exponential\+Backoff Class Reference}
\hypertarget{class_exponential_backoff}{}\label{class_exponential_backoff}\index{ExponentialBackoff@{ExponentialBackoff}}


Collaboration diagram for Exponential\+Backoff\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=173pt]{class_exponential_backoff__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{response_8js_a10d7f5ef6343bd4575249458cf93dd3e}{get}} \mbox{\hyperlink{class_exponential_backoff_ad23efc4074be928c30c2a77aba19c3ac}{retry\+Count}} ()
\end{DoxyCompactItemize}
\doxysubsubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_exponential_backoff_af7349d3135b9f4d980d8f9adb7d21da4}{constructor}} (options=\{\})
\item 
\mbox{\hyperlink{class_exponential_backoff_ab8697bd1da9da84052c0d560ea357a8d}{reset}} ()
\item 
\mbox{\hyperlink{class_exponential_backoff_a1f06c2693322866b89d1b542df8858a4}{reset\+To\+Max}} ()
\item 
\mbox{\hyperlink{class_exponential_backoff_a00a9db07b9864f1a74e43948f79f879b}{backoff\+And\+Wait}} ()
\item 
\mbox{\hyperlink{class_exponential_backoff_aefeb5ed1f4ebdb3db2019a2132b04bad}{jitter\+Delay\+Ms}} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\doxylink{class_a}{A} helper for running delayed tasks following an exponential backoff curve between attempts.

Each delay is made up of a "{}base"{} delay which follows the exponential backoff curve, and a "{}jitter"{} (+/-\/ 50\% by default) that is calculated and added to the base delay. This prevents clients from accidentally synchronizing their delays causing spikes of load to the backend. 

\doxysubsection{Member Function Documentation}
\Hypertarget{class_exponential_backoff_a00a9db07b9864f1a74e43948f79f879b}\index{ExponentialBackoff@{ExponentialBackoff}!backoffAndWait@{backoffAndWait}}
\index{backoffAndWait@{backoffAndWait}!ExponentialBackoff@{ExponentialBackoff}}
\doxysubsubsection{\texorpdfstring{backoffAndWait()}{backoffAndWait()}}
{\footnotesize\ttfamily \label{class_exponential_backoff_a00a9db07b9864f1a74e43948f79f879b} 
Exponential\+Backoff\+::backoff\+And\+Wait (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Returns a promise that resolves after current\+Delay\+Ms, and increases the delay for any subsequent attempts.

\begin{DoxyReturn}{Returns}
\doxylink{class_a}{A} Promise that resolves when the current delay elapsed. 
\end{DoxyReturn}


References \mbox{\hyperlink{form_8js_ab63a7754967c678e14c9ece9cf96be37}{\$}}, \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_a633f76c2f6070be182949e8d86a51bc6}{base}}, \mbox{\hyperlink{lodash_2core_8js_ae9012370fd5bbda6f1dbd157b9012f73}{delay}}, \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_aa4072ba4b6b56b0fb6f4801f17ab2b34}{exports}}, \mbox{\hyperlink{class_exponential_backoff_aefeb5ed1f4ebdb3db2019a2132b04bad}{jitter\+Delay\+Ms()}}, \mbox{\hyperlink{backoff_8js_aa6fdd07b218f5ee1f103f79a4ad6d5f1}{logger\+\_\+1}}, \mbox{\hyperlink{timespan_8js_a4bd9500f2db802231165a0f18e843906}{ms}}, \mbox{\hyperlink{_0dprotobufjs_2eventemitter_2index_8js_ab6259267561b7c85cc788ab12abb95e7}{off}}, \mbox{\hyperlink{__get_tag_8js_abace523389c17bce1848e3a427871700}{Promise}}, \mbox{\hyperlink{_0dprotobufjs_2path_2index_8js_a2001ea102ec496ebdabe15e68493427a}{resolve}}, and \mbox{\hyperlink{class_exponential_backoff_ad23efc4074be928c30c2a77aba19c3ac}{retry\+Count()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=318pt]{class_exponential_backoff_a00a9db07b9864f1a74e43948f79f879b_cgraph}
\end{center}
\end{figure}
\Hypertarget{class_exponential_backoff_af7349d3135b9f4d980d8f9adb7d21da4}\index{ExponentialBackoff@{ExponentialBackoff}!constructor@{constructor}}
\index{constructor@{constructor}!ExponentialBackoff@{ExponentialBackoff}}
\doxysubsubsection{\texorpdfstring{constructor()}{constructor()}}
{\footnotesize\ttfamily \label{class_exponential_backoff_af7349d3135b9f4d980d8f9adb7d21da4} 
Exponential\+Backoff\+::constructor (\begin{DoxyParamCaption}\item[{}]{options}{ = {\ttfamily \{\}}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

The number of retries that has been attempted.

The backoff delay of the current attempt.

Whether we are currently waiting for backoff to complete.\Hypertarget{class_exponential_backoff_aefeb5ed1f4ebdb3db2019a2132b04bad}\index{ExponentialBackoff@{ExponentialBackoff}!jitterDelayMs@{jitterDelayMs}}
\index{jitterDelayMs@{jitterDelayMs}!ExponentialBackoff@{ExponentialBackoff}}
\doxysubsubsection{\texorpdfstring{jitterDelayMs()}{jitterDelayMs()}}
{\footnotesize\ttfamily \label{class_exponential_backoff_aefeb5ed1f4ebdb3db2019a2132b04bad} 
Exponential\+Backoff\+::jitter\+Delay\+Ms (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Returns a randomized "{}jitter"{} delay based on the current base and jitter factor.

\begin{DoxyReturn}{Returns}
\{number\} The jitter to apply based on the current delay. 
\end{DoxyReturn}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=318pt]{class_exponential_backoff_aefeb5ed1f4ebdb3db2019a2132b04bad_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_exponential_backoff_ab8697bd1da9da84052c0d560ea357a8d}\index{ExponentialBackoff@{ExponentialBackoff}!reset@{reset}}
\index{reset@{reset}!ExponentialBackoff@{ExponentialBackoff}}
\doxysubsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily \label{class_exponential_backoff_ab8697bd1da9da84052c0d560ea357a8d} 
Exponential\+Backoff\+::reset (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Resets the backoff delay and retry count.

The very next \doxylink{class_exponential_backoff_a00a9db07b9864f1a74e43948f79f879b}{backoff\+And\+Wait()} will have no delay. If it is called again (i.\+e. due to an error), initial\+Delay\+Ms (plus jitter) will be used, and subsequent ones will increase according to the backoff\+Factor. \Hypertarget{class_exponential_backoff_a1f06c2693322866b89d1b542df8858a4}\index{ExponentialBackoff@{ExponentialBackoff}!resetToMax@{resetToMax}}
\index{resetToMax@{resetToMax}!ExponentialBackoff@{ExponentialBackoff}}
\doxysubsubsection{\texorpdfstring{resetToMax()}{resetToMax()}}
{\footnotesize\ttfamily \label{class_exponential_backoff_a1f06c2693322866b89d1b542df8858a4} 
Exponential\+Backoff\+::reset\+To\+Max (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Resets the backoff delay to the maximum delay (e.\+g. for use after a RESOURCE\+\_\+\+EXHAUSTED error). \Hypertarget{class_exponential_backoff_ad23efc4074be928c30c2a77aba19c3ac}\index{ExponentialBackoff@{ExponentialBackoff}!retryCount@{retryCount}}
\index{retryCount@{retryCount}!ExponentialBackoff@{ExponentialBackoff}}
\doxysubsubsection{\texorpdfstring{retryCount()}{retryCount()}}
{\footnotesize\ttfamily \label{class_exponential_backoff_ad23efc4074be928c30c2a77aba19c3ac} 
\mbox{\hyperlink{response_8js_a10d7f5ef6343bd4575249458cf93dd3e}{get}} Exponential\+Backoff\+::retry\+Count (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=318pt]{class_exponential_backoff_ad23efc4074be928c30c2a77aba19c3ac_icgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
backend/node\+\_\+modules/@google-\/cloud/firestore/build/src/\mbox{\hyperlink{backoff_8js}{backoff.\+js}}\end{DoxyCompactItemize}
