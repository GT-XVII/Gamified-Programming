\doxysection{Watch Class Reference}
\hypertarget{class_watch}{}\label{class_watch}\index{Watch@{Watch}}


Inheritance diagram for Watch\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=276pt]{class_watch__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Watch\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=205pt]{class_watch__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_watch_aaf85c5a50cb5537605683fc43c2eccf0}{shutdown}} ()
\end{DoxyCompactItemize}
\doxysubsubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_watch_a305ab226f467b05f284ae23b274b3a05}{constructor}} (\mbox{\hyperlink{firestore-namespace_8js_a6c18541a3018cee632d7e797bb983f36}{firestore}}, \+\_\+converter=(0, types\+\_\+1.\+default\+Converter)())
\item 
\mbox{\hyperlink{class_watch_a502cddf27d20bae18e6b7d49d0aee5b6}{on\+Snapshot}} (on\+Next, on\+Error)
\item 
\mbox{\hyperlink{class_watch_abd7f09b710fc861f54a02b2e48dca68b}{current\+Size}} ()
\item 
\mbox{\hyperlink{class_watch_a84402f2f27d17afc54cdf82e14f1effd}{extract\+Current\+Changes}} (read\+Time)
\item 
\mbox{\hyperlink{class_watch_a75c172f43038c534b631c90969dbaa90}{reset\+Docs}} ()
\item 
\mbox{\hyperlink{class_watch_a06f109deedd89699472de242363a2726}{close\+Stream}} (err)
\item 
\mbox{\hyperlink{class_watch_a47047c5c983dd47cc9b7875b18dba55d}{maybe\+Reopen\+Stream}} (err)
\item 
\mbox{\hyperlink{class_watch_a18fb83c5b256846e262feb349400adfb}{reset\+Idle\+Timeout}} ()
\item 
\mbox{\hyperlink{class_watch_a8550a3e7706176102c2f303551f10f4f}{reset\+Stream}} ()
\item 
\mbox{\hyperlink{class_watch_a444d1b684995b48c0fa178ab7fa79ca3}{init\+Stream}} ()
\item 
\mbox{\hyperlink{class_watch_a5ff70affbd79cef883681b2d9a9a8e6c}{on\+Data}} (\mbox{\hyperlink{chalk_2source_2index_8js_a391e164e296dc4d66cb9a11c050f2f3d}{proto}})
\item 
\mbox{\hyperlink{class_watch_af3b750b75ab7d6dabd7edc8afca80504}{affects\+Target}} (target\+Ids, current\+Id)
\item 
\mbox{\hyperlink{class_watch_aadd2d2774ef29095b462abecf1a8f56b}{push\+Snapshot}} (read\+Time, next\+Resume\+Token)
\item 
\mbox{\hyperlink{class_watch_aff85b1f5358d3a2c7ac4c9769e8a05af}{delete\+Doc}} (\mbox{\hyperlink{database-compat_2dist_2index_8esm2017_8js_a065dce940aaa83aab96e001e5f46d129}{name}})
\item 
\mbox{\hyperlink{class_watch_af36bd14fbe28aa63d2ee2fbb603899c5}{add\+Doc}} (new\+Document)
\item 
\mbox{\hyperlink{class_watch_a94fb2c6dc89448f51f8386bf173b70f2}{modify\+Doc}} (new\+Document)
\item 
\mbox{\hyperlink{class_watch_ae94fdd6c853110516a9b6a0f37073f04}{compute\+Snapshot}} (read\+Time)
\item 
\mbox{\hyperlink{class_watch_a6ab0cecb42a10a487c55ec4e9620a5fc}{is\+Permanent\+Watch\+Error}} (\mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_afaa7db0d6208d21f727c716fa3962b44}{error}})
\item 
\mbox{\hyperlink{class_watch_a6f6d4baa7c975155d939f495cf81c934}{is\+Resource\+Exhausted\+Error}} (\mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_afaa7db0d6208d21f727c716fa3962b44}{error}})
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\doxylink{class_watch}{Watch} provides listen functionality and exposes the \textquotesingle{}on\+Snapshot\textquotesingle{} observer. It can be used with a valid \doxylink{class_firestore}{Firestore} Listen target. 

\doxysubsection{Member Function Documentation}
\Hypertarget{class_watch_af36bd14fbe28aa63d2ee2fbb603899c5}\index{Watch@{Watch}!addDoc@{addDoc}}
\index{addDoc@{addDoc}!Watch@{Watch}}
\doxysubsubsection{\texorpdfstring{addDoc()}{addDoc()}}
{\footnotesize\ttfamily \label{class_watch_af36bd14fbe28aa63d2ee2fbb603899c5} 
Watch\+::add\+Doc (\begin{DoxyParamCaption}\item[{}]{new\+Document}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Applies a document add to the document tree and the document map. Returns the corresponding \doxylink{class_document_change}{Document\+Change} event. 

References \mbox{\hyperlink{watch_8js_a0a4d6a89916a48f4ba0e696e93dfc003}{assert}}, \mbox{\hyperlink{watch_8js_a3e3ff11e8765f8a0f5fdb17731d5b163}{Change\+Type}}, \mbox{\hyperlink{watch_8js_a1796b01a2d5d3a6ff1cca09435ef9ae8}{document\+\_\+change\+\_\+1}}, and \mbox{\hyperlink{database-compat_2dist_2index_8esm2017_8js_a065dce940aaa83aab96e001e5f46d129}{name}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_af36bd14fbe28aa63d2ee2fbb603899c5_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_watch_af3b750b75ab7d6dabd7edc8afca80504}\index{Watch@{Watch}!affectsTarget@{affectsTarget}}
\index{affectsTarget@{affectsTarget}!Watch@{Watch}}
\doxysubsubsection{\texorpdfstring{affectsTarget()}{affectsTarget()}}
{\footnotesize\ttfamily \label{class_watch_af3b750b75ab7d6dabd7edc8afca80504} 
Watch\+::affects\+Target (\begin{DoxyParamCaption}\item[{}]{target\+Ids}{, }\item[{}]{current\+Id}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Checks if the current target id is included in the list of target ids. If no target\+Ids are provided, returns true. 

References \mbox{\hyperlink{cjs_2internal_2observable_2of_8js_afd9e33601da8812842c6288b48c17f0a}{of}}, and \mbox{\hyperlink{get-intrinsic_2index_8js_ae6aa4817f0f49345b718ea6b4abae197}{undefined}}.

\Hypertarget{class_watch_a06f109deedd89699472de242363a2726}\index{Watch@{Watch}!closeStream@{closeStream}}
\index{closeStream@{closeStream}!Watch@{Watch}}
\doxysubsubsection{\texorpdfstring{closeStream()}{closeStream()}}
{\footnotesize\ttfamily \label{class_watch_a06f109deedd89699472de242363a2726} 
Watch\+::close\+Stream (\begin{DoxyParamCaption}\item[{}]{err}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Closes the stream and calls on\+Error() if the stream is still active. 

References \mbox{\hyperlink{watch_8js_aa6fdd07b218f5ee1f103f79a4ad6d5f1}{logger\+\_\+1}}, \mbox{\hyperlink{_0dgoogle-cloud_2firestore_2build_2src_2util_8js_aaf8bdc7a31a57b85aa6575ef8ffdd793}{request\+Tag}}, and \mbox{\hyperlink{class_watch_aaf85c5a50cb5537605683fc43c2eccf0}{shutdown()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=312pt]{class_watch_a06f109deedd89699472de242363a2726_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_a06f109deedd89699472de242363a2726_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_watch_ae94fdd6c853110516a9b6a0f37073f04}\index{Watch@{Watch}!computeSnapshot@{computeSnapshot}}
\index{computeSnapshot@{computeSnapshot}!Watch@{Watch}}
\doxysubsubsection{\texorpdfstring{computeSnapshot()}{computeSnapshot()}}
{\footnotesize\ttfamily \label{class_watch_ae94fdd6c853110516a9b6a0f37073f04} 
Watch\+::compute\+Snapshot (\begin{DoxyParamCaption}\item[{}]{read\+Time}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Applies the mutations in change\+Map to both the document tree and the document lookup map. Modified doc\+Map in-\/place and returns the updated state. 

References \mbox{\hyperlink{class_watch_af36bd14fbe28aa63d2ee2fbb603899c5}{add\+Doc()}}, \mbox{\hyperlink{watch_8js_a0a4d6a89916a48f4ba0e696e93dfc003}{assert}}, \mbox{\hyperlink{class_watch_aff85b1f5358d3a2c7ac4c9769e8a05af}{delete\+Doc()}}, \mbox{\hyperlink{class_watch_a84402f2f27d17afc54cdf82e14f1effd}{extract\+Current\+Changes()}}, \mbox{\hyperlink{class_watch_a94fb2c6dc89448f51f8386bf173b70f2}{modify\+Doc()}}, and \mbox{\hyperlink{database-compat_2dist_2index_8esm2017_8js_a065dce940aaa83aab96e001e5f46d129}{name}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_ae94fdd6c853110516a9b6a0f37073f04_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_ae94fdd6c853110516a9b6a0f37073f04_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_watch_a305ab226f467b05f284ae23b274b3a05}\index{Watch@{Watch}!constructor@{constructor}}
\index{constructor@{constructor}!Watch@{Watch}}
\doxysubsubsection{\texorpdfstring{constructor()}{constructor()}}
{\footnotesize\ttfamily \label{class_watch_a305ab226f467b05f284ae23b274b3a05} 
Watch\+::constructor (\begin{DoxyParamCaption}\item[{}]{firestore}{, }\item[{}]{\+\_\+converter}{ = {\ttfamily (0,~types\+\_\+1.defaultConverter)()}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Indicates whether we are interested in data from the stream. Set to false in the \textquotesingle{}unsubscribe()\textquotesingle{} callback.

The current stream to the backend.

The server assigns and updates the resume token.

\doxylink{class_a}{A} map of document names to Query\+Document\+Snapshots for the last sent snapshot.

The accumulated map of document changes (keyed by document name) for the current snapshot.

The current state of the query results. \texorpdfstring{$\ast$}{*}

We need this to track whether we\textquotesingle{}ve pushed an initial set of changes, since we should push those even when there are no changes, if there aren\textquotesingle{}t docs.

References \mbox{\hyperlink{watch_8js_a2a99b35f5acb6783c8f83ba70a05086a}{backoff\+\_\+1}}, \mbox{\hyperlink{watch_8js_a1b87f652b360fcee5472ad89bb56665c}{EMPTY\+\_\+\+FUNCTION}}, \mbox{\hyperlink{firestore-namespace_8js_a6c18541a3018cee632d7e797bb983f36}{firestore}}, \mbox{\hyperlink{__get_tag_8js_aa38772edcc6ff00766e19b36ce8073a8}{Map}}, \mbox{\hyperlink{_0dgoogle-cloud_2firestore_2build_2src_2util_8js_aaf8bdc7a31a57b85aa6575ef8ffdd793}{request\+Tag}}, \mbox{\hyperlink{get-intrinsic_2index_8js_ae6aa4817f0f49345b718ea6b4abae197}{undefined}}, and \mbox{\hyperlink{watch_8js_a6af3fa6e24c6a46faf4552f3a2ad8783}{util\+\_\+1}}.

\Hypertarget{class_watch_abd7f09b710fc861f54a02b2e48dca68b}\index{Watch@{Watch}!currentSize@{currentSize}}
\index{currentSize@{currentSize}!Watch@{Watch}}
\doxysubsubsection{\texorpdfstring{currentSize()}{currentSize()}}
{\footnotesize\ttfamily \label{class_watch_abd7f09b710fc861f54a02b2e48dca68b} 
Watch\+::current\+Size (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Returns the current count of all documents, including the changes from the current change\+Map. 

References \mbox{\hyperlink{class_watch_a84402f2f27d17afc54cdf82e14f1effd}{extract\+Current\+Changes()}}, and \mbox{\hyperlink{watch_8js_ade04b24e14507564885ddbb231b3fc20}{timestamp\+\_\+1}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_abd7f09b710fc861f54a02b2e48dca68b_cgraph}
\end{center}
\end{figure}
\Hypertarget{class_watch_aff85b1f5358d3a2c7ac4c9769e8a05af}\index{Watch@{Watch}!deleteDoc@{deleteDoc}}
\index{deleteDoc@{deleteDoc}!Watch@{Watch}}
\doxysubsubsection{\texorpdfstring{deleteDoc()}{deleteDoc()}}
{\footnotesize\ttfamily \label{class_watch_aff85b1f5358d3a2c7ac4c9769e8a05af} 
Watch\+::delete\+Doc (\begin{DoxyParamCaption}\item[{}]{name}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Applies a document delete to the document tree and the document map. Returns the corresponding \doxylink{class_document_change}{Document\+Change} event. 

References \mbox{\hyperlink{watch_8js_a0a4d6a89916a48f4ba0e696e93dfc003}{assert}}, \mbox{\hyperlink{watch_8js_a3e3ff11e8765f8a0f5fdb17731d5b163}{Change\+Type}}, \mbox{\hyperlink{watch_8js_a1796b01a2d5d3a6ff1cca09435ef9ae8}{document\+\_\+change\+\_\+1}}, and \mbox{\hyperlink{database-compat_2dist_2index_8esm2017_8js_a065dce940aaa83aab96e001e5f46d129}{name}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_aff85b1f5358d3a2c7ac4c9769e8a05af_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_watch_a84402f2f27d17afc54cdf82e14f1effd}\index{Watch@{Watch}!extractCurrentChanges@{extractCurrentChanges}}
\index{extractCurrentChanges@{extractCurrentChanges}!Watch@{Watch}}
\doxysubsubsection{\texorpdfstring{extractCurrentChanges()}{extractCurrentChanges()}}
{\footnotesize\ttfamily \label{class_watch_a84402f2f27d17afc54cdf82e14f1effd} 
Watch\+::extract\+Current\+Changes (\begin{DoxyParamCaption}\item[{}]{read\+Time}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Splits up document changes into removals, additions, and updates. 

References \mbox{\hyperlink{database-compat_2dist_2index_8esm2017_8js_a065dce940aaa83aab96e001e5f46d129}{name}}, \mbox{\hyperlink{watch_8js_a407d200e9f16e51a21be57a9fcec09f0}{REMOVED}}, and \mbox{\hyperlink{get-intrinsic_2index_8js_aacce635d68067370c70caa2381ea1040}{value}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_a84402f2f27d17afc54cdf82e14f1effd_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_watch_a444d1b684995b48c0fa178ab7fa79ca3}\index{Watch@{Watch}!initStream@{initStream}}
\index{initStream@{initStream}!Watch@{Watch}}
\doxysubsubsection{\texorpdfstring{initStream()}{initStream()}}
{\footnotesize\ttfamily \label{class_watch_a444d1b684995b48c0fa178ab7fa79ca3} 
Watch\+::init\+Stream (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Initializes a new stream to the backend with backoff. 

References \mbox{\hyperlink{util_2dist_2index_8cjs_8js_af516a86cc3f563f4c12f98f31f1e2e57}{async}}, \mbox{\hyperlink{class_watch_a06f109deedd89699472de242363a2726}{close\+Stream()}}, \mbox{\hyperlink{firestore-namespace_8js_a6c18541a3018cee632d7e797bb983f36}{firestore}}, \mbox{\hyperlink{watch_8js_ae49df1ea55f05ce652f5f279bb057b0d}{google\+\_\+gax\+\_\+1}}, \mbox{\hyperlink{watch_8js_aa6fdd07b218f5ee1f103f79a4ad6d5f1}{logger\+\_\+1}}, \mbox{\hyperlink{class_watch_a47047c5c983dd47cc9b7875b18dba55d}{maybe\+Reopen\+Stream()}}, \mbox{\hyperlink{_0dprotobufjs_2eventemitter_2index_8js_ac6ebb2e1fddfd9205cff6790e2aaa3a6}{on}}, \mbox{\hyperlink{class_watch_a5ff70affbd79cef883681b2d9a9a8e6c}{on\+Data()}}, \mbox{\hyperlink{chalk_2source_2index_8js_a391e164e296dc4d66cb9a11c050f2f3d}{proto}}, \mbox{\hyperlink{_0dgoogle-cloud_2storage_2build_2esm_2src_2nodejs-common_2util_8js_a5e81a74b5b19c1557ba165296dc2d3da}{request}}, \mbox{\hyperlink{_0dgoogle-cloud_2firestore_2build_2src_2util_8js_aaf8bdc7a31a57b85aa6575ef8ffdd793}{request\+Tag}}, and \mbox{\hyperlink{class_watch_a18fb83c5b256846e262feb349400adfb}{reset\+Idle\+Timeout()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_a444d1b684995b48c0fa178ab7fa79ca3_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_a444d1b684995b48c0fa178ab7fa79ca3_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_watch_a6ab0cecb42a10a487c55ec4e9620a5fc}\index{Watch@{Watch}!isPermanentWatchError@{isPermanentWatchError}}
\index{isPermanentWatchError@{isPermanentWatchError}!Watch@{Watch}}
\doxysubsubsection{\texorpdfstring{isPermanentWatchError()}{isPermanentWatchError()}}
{\footnotesize\ttfamily \label{class_watch_a6ab0cecb42a10a487c55ec4e9620a5fc} 
Watch\+::is\+Permanent\+Watch\+Error (\begin{DoxyParamCaption}\item[{}]{error}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Determines whether a watch error is considered permanent and should not be retried. Errors that don\textquotesingle{}t provide a GRPC error code are always considered transient in this context. 

References \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_afaa7db0d6208d21f727c716fa3962b44}{error}}, \mbox{\hyperlink{watch_8js_ae49df1ea55f05ce652f5f279bb057b0d}{google\+\_\+gax\+\_\+1}}, \mbox{\hyperlink{watch_8js_aa6fdd07b218f5ee1f103f79a4ad6d5f1}{logger\+\_\+1}}, \mbox{\hyperlink{_0dgoogle-cloud_2firestore_2build_2src_2util_8js_aaf8bdc7a31a57b85aa6575ef8ffdd793}{request\+Tag}}, and \mbox{\hyperlink{get-intrinsic_2index_8js_ae6aa4817f0f49345b718ea6b4abae197}{undefined}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_a6ab0cecb42a10a487c55ec4e9620a5fc_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_watch_a6f6d4baa7c975155d939f495cf81c934}\index{Watch@{Watch}!isResourceExhaustedError@{isResourceExhaustedError}}
\index{isResourceExhaustedError@{isResourceExhaustedError}!Watch@{Watch}}
\doxysubsubsection{\texorpdfstring{isResourceExhaustedError()}{isResourceExhaustedError()}}
{\footnotesize\ttfamily \label{class_watch_a6f6d4baa7c975155d939f495cf81c934} 
Watch\+::is\+Resource\+Exhausted\+Error (\begin{DoxyParamCaption}\item[{}]{error}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Determines whether we need to initiate a longer backoff due to system overload. 

References \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_afaa7db0d6208d21f727c716fa3962b44}{error}}, and \mbox{\hyperlink{watch_8js_ae49df1ea55f05ce652f5f279bb057b0d}{google\+\_\+gax\+\_\+1}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_a6f6d4baa7c975155d939f495cf81c934_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_watch_a47047c5c983dd47cc9b7875b18dba55d}\index{Watch@{Watch}!maybeReopenStream@{maybeReopenStream}}
\index{maybeReopenStream@{maybeReopenStream}!Watch@{Watch}}
\doxysubsubsection{\texorpdfstring{maybeReopenStream()}{maybeReopenStream()}}
{\footnotesize\ttfamily \label{class_watch_a47047c5c983dd47cc9b7875b18dba55d} 
Watch\+::maybe\+Reopen\+Stream (\begin{DoxyParamCaption}\item[{}]{err}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Re-\/opens the stream unless the specified error is considered permanent. Clears the change map. 

References \mbox{\hyperlink{class_watch_a06f109deedd89699472de242363a2726}{close\+Stream()}}, \mbox{\hyperlink{class_watch_a444d1b684995b48c0fa178ab7fa79ca3}{init\+Stream()}}, \mbox{\hyperlink{class_watch_a6ab0cecb42a10a487c55ec4e9620a5fc}{is\+Permanent\+Watch\+Error()}}, \mbox{\hyperlink{class_watch_a6f6d4baa7c975155d939f495cf81c934}{is\+Resource\+Exhausted\+Error()}}, \mbox{\hyperlink{watch_8js_aa6fdd07b218f5ee1f103f79a4ad6d5f1}{logger\+\_\+1}}, and \mbox{\hyperlink{_0dgoogle-cloud_2firestore_2build_2src_2util_8js_aaf8bdc7a31a57b85aa6575ef8ffdd793}{request\+Tag}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_a47047c5c983dd47cc9b7875b18dba55d_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_a47047c5c983dd47cc9b7875b18dba55d_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_watch_a94fb2c6dc89448f51f8386bf173b70f2}\index{Watch@{Watch}!modifyDoc@{modifyDoc}}
\index{modifyDoc@{modifyDoc}!Watch@{Watch}}
\doxysubsubsection{\texorpdfstring{modifyDoc()}{modifyDoc()}}
{\footnotesize\ttfamily \label{class_watch_a94fb2c6dc89448f51f8386bf173b70f2} 
Watch\+::modify\+Doc (\begin{DoxyParamCaption}\item[{}]{new\+Document}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Applies a document modification to the document tree and the document map. Returns the \doxylink{class_document_change}{Document\+Change} event for successful modifications. 

References \mbox{\hyperlink{class_watch_af36bd14fbe28aa63d2ee2fbb603899c5}{add\+Doc()}}, \mbox{\hyperlink{watch_8js_a0a4d6a89916a48f4ba0e696e93dfc003}{assert}}, \mbox{\hyperlink{watch_8js_a3e3ff11e8765f8a0f5fdb17731d5b163}{Change\+Type}}, \mbox{\hyperlink{class_watch_aff85b1f5358d3a2c7ac4c9769e8a05af}{delete\+Doc()}}, \mbox{\hyperlink{watch_8js_a1796b01a2d5d3a6ff1cca09435ef9ae8}{document\+\_\+change\+\_\+1}}, and \mbox{\hyperlink{database-compat_2dist_2index_8esm2017_8js_a065dce940aaa83aab96e001e5f46d129}{name}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=307pt]{class_watch_a94fb2c6dc89448f51f8386bf173b70f2_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_a94fb2c6dc89448f51f8386bf173b70f2_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_watch_a5ff70affbd79cef883681b2d9a9a8e6c}\index{Watch@{Watch}!onData@{onData}}
\index{onData@{onData}!Watch@{Watch}}
\doxysubsubsection{\texorpdfstring{onData()}{onData()}}
{\footnotesize\ttfamily \label{class_watch_a5ff70affbd79cef883681b2d9a9a8e6c} 
Watch\+::on\+Data (\begin{DoxyParamCaption}\item[{}]{proto}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Handles \textquotesingle{}data\textquotesingle{} events and closes the stream if the response type is invalid. 

References \mbox{\hyperlink{class_watch_a06f109deedd89699472de242363a2726}{close\+Stream()}}, \mbox{\hyperlink{watch_8js_a0d8248e7d9115839596aa13782b68637}{document\+\_\+1}}, \mbox{\hyperlink{firestore-namespace_8js_a6c18541a3018cee632d7e797bb983f36}{firestore}}, \mbox{\hyperlink{watch_8js_ae49df1ea55f05ce652f5f279bb057b0d}{google\+\_\+gax\+\_\+1}}, \mbox{\hyperlink{ipaddr_8min_8js_a7e98b8a17c0aad30ba64d47b74e2a6c1}{i}}, \mbox{\hyperlink{json-bigint_2lib_2stringify_8js_aec316efdeb7b2e5358b7d50869858da1}{JSON}}, \mbox{\hyperlink{watch_8js_aa6fdd07b218f5ee1f103f79a4ad6d5f1}{logger\+\_\+1}}, \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_ad031ac2c2bcd5e0fe9c6b67fc309acd4}{message}}, \mbox{\hyperlink{database-compat_2dist_2index_8esm2017_8js_a065dce940aaa83aab96e001e5f46d129}{name}}, \mbox{\hyperlink{watch_8js_a705fe9bf53f002be551bde47cc3a6069}{path\+\_\+1}}, \mbox{\hyperlink{chalk_2source_2index_8js_a391e164e296dc4d66cb9a11c050f2f3d}{proto}}, \mbox{\hyperlink{class_watch_aadd2d2774ef29095b462abecf1a8f56b}{push\+Snapshot()}}, \mbox{\hyperlink{watch_8js_a407d200e9f16e51a21be57a9fcec09f0}{REMOVED}}, \mbox{\hyperlink{_0dgoogle-cloud_2firestore_2build_2src_2util_8js_aaf8bdc7a31a57b85aa6575ef8ffdd793}{request\+Tag}}, \mbox{\hyperlink{class_watch_a75c172f43038c534b631c90969dbaa90}{reset\+Docs()}}, \mbox{\hyperlink{class_watch_a8550a3e7706176102c2f303551f10f4f}{reset\+Stream()}}, \mbox{\hyperlink{watch_8js_ade04b24e14507564885ddbb231b3fc20}{timestamp\+\_\+1}}, and \mbox{\hyperlink{watch_8js_a875fd9e2d4a7c5222882e625efeaf814}{WATCH\+\_\+\+TARGET\+\_\+\+ID}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_a5ff70affbd79cef883681b2d9a9a8e6c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_a5ff70affbd79cef883681b2d9a9a8e6c_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_watch_a502cddf27d20bae18e6b7d49d0aee5b6}\index{Watch@{Watch}!onSnapshot@{onSnapshot}}
\index{onSnapshot@{onSnapshot}!Watch@{Watch}}
\doxysubsubsection{\texorpdfstring{onSnapshot()}{onSnapshot()}}
{\footnotesize\ttfamily \label{class_watch_a502cddf27d20bae18e6b7d49d0aee5b6} 
Watch\+::on\+Snapshot (\begin{DoxyParamCaption}\item[{}]{on\+Next}{, }\item[{}]{on\+Error}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Starts a watch and attaches a listener for document change events. 

References \mbox{\hyperlink{watch_8js_a0a4d6a89916a48f4ba0e696e93dfc003}{assert}}, \mbox{\hyperlink{watch_8js_a1b87f652b360fcee5472ad89bb56665c}{EMPTY\+\_\+\+FUNCTION}}, \mbox{\hyperlink{firestore-namespace_8js_a6c18541a3018cee632d7e797bb983f36}{firestore}}, \mbox{\hyperlink{class_watch_a444d1b684995b48c0fa178ab7fa79ca3}{init\+Stream()}}, \mbox{\hyperlink{watch_8js_aa6fdd07b218f5ee1f103f79a4ad6d5f1}{logger\+\_\+1}}, \mbox{\hyperlink{watch_8js_ae8dc558c657230155f2b18b6ab497984}{rbtree}}, \mbox{\hyperlink{_0dgoogle-cloud_2firestore_2build_2src_2util_8js_aaf8bdc7a31a57b85aa6575ef8ffdd793}{request\+Tag}}, \mbox{\hyperlink{class_watch_aaf85c5a50cb5537605683fc43c2eccf0}{shutdown()}}, and \mbox{\hyperlink{get-intrinsic_2index_8js_ae6aa4817f0f49345b718ea6b4abae197}{undefined}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_a502cddf27d20bae18e6b7d49d0aee5b6_cgraph}
\end{center}
\end{figure}
\Hypertarget{class_watch_aadd2d2774ef29095b462abecf1a8f56b}\index{Watch@{Watch}!pushSnapshot@{pushSnapshot}}
\index{pushSnapshot@{pushSnapshot}!Watch@{Watch}}
\doxysubsubsection{\texorpdfstring{pushSnapshot()}{pushSnapshot()}}
{\footnotesize\ttfamily \label{class_watch_aadd2d2774ef29095b462abecf1a8f56b} 
Watch\+::push\+Snapshot (\begin{DoxyParamCaption}\item[{}]{read\+Time}{, }\item[{}]{next\+Resume\+Token}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Assembles a new snapshot from the current set of changes and invokes the user\textquotesingle{}s callback. Clears the current changes on completion. 

References \mbox{\hyperlink{class_watch_ae94fdd6c853110516a9b6a0f37073f04}{compute\+Snapshot()}}, \mbox{\hyperlink{watch_8js_aa6fdd07b218f5ee1f103f79a4ad6d5f1}{logger\+\_\+1}}, and \mbox{\hyperlink{_0dgoogle-cloud_2firestore_2build_2src_2util_8js_aaf8bdc7a31a57b85aa6575ef8ffdd793}{request\+Tag}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_aadd2d2774ef29095b462abecf1a8f56b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_aadd2d2774ef29095b462abecf1a8f56b_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_watch_a75c172f43038c534b631c90969dbaa90}\index{Watch@{Watch}!resetDocs@{resetDocs}}
\index{resetDocs@{resetDocs}!Watch@{Watch}}
\doxysubsubsection{\texorpdfstring{resetDocs()}{resetDocs()}}
{\footnotesize\ttfamily \label{class_watch_a75c172f43038c534b631c90969dbaa90} 
Watch\+::reset\+Docs (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Helper to clear the docs on RESET or filter mismatch. 

References \mbox{\hyperlink{watch_8js_aa6fdd07b218f5ee1f103f79a4ad6d5f1}{logger\+\_\+1}}, \mbox{\hyperlink{watch_8js_a407d200e9f16e51a21be57a9fcec09f0}{REMOVED}}, \mbox{\hyperlink{_0dgoogle-cloud_2firestore_2build_2src_2util_8js_aaf8bdc7a31a57b85aa6575ef8ffdd793}{request\+Tag}}, and \mbox{\hyperlink{get-intrinsic_2index_8js_ae6aa4817f0f49345b718ea6b4abae197}{undefined}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_a75c172f43038c534b631c90969dbaa90_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_watch_a18fb83c5b256846e262feb349400adfb}\index{Watch@{Watch}!resetIdleTimeout@{resetIdleTimeout}}
\index{resetIdleTimeout@{resetIdleTimeout}!Watch@{Watch}}
\doxysubsubsection{\texorpdfstring{resetIdleTimeout()}{resetIdleTimeout()}}
{\footnotesize\ttfamily \label{class_watch_a18fb83c5b256846e262feb349400adfb} 
Watch\+::reset\+Idle\+Timeout (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Cancels the current idle timeout and reschedules a new timer. 

References \mbox{\hyperlink{logger_2dist_2esm_2index_8esm5_8js_a0adf123df8967a14b5bdd9ff3bbe2d0c}{\+\_\+a}}, \mbox{\hyperlink{watch_8js_a2a99b35f5acb6783c8f83ba70a05086a}{backoff\+\_\+1}}, \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_afaa7db0d6208d21f727c716fa3962b44}{error}}, \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_aa4072ba4b6b56b0fb6f4801f17ab2b34}{exports}}, \mbox{\hyperlink{watch_8js_ae49df1ea55f05ce652f5f279bb057b0d}{google\+\_\+gax\+\_\+1}}, \mbox{\hyperlink{watch_8js_aa6fdd07b218f5ee1f103f79a4ad6d5f1}{logger\+\_\+1}}, \mbox{\hyperlink{class_watch_a47047c5c983dd47cc9b7875b18dba55d}{maybe\+Reopen\+Stream()}}, and \mbox{\hyperlink{_0dgoogle-cloud_2firestore_2build_2src_2util_8js_aaf8bdc7a31a57b85aa6575ef8ffdd793}{request\+Tag}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_a18fb83c5b256846e262feb349400adfb_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_a18fb83c5b256846e262feb349400adfb_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_watch_a8550a3e7706176102c2f303551f10f4f}\index{Watch@{Watch}!resetStream@{resetStream}}
\index{resetStream@{resetStream}!Watch@{Watch}}
\doxysubsubsection{\texorpdfstring{resetStream()}{resetStream()}}
{\footnotesize\ttfamily \label{class_watch_a8550a3e7706176102c2f303551f10f4f} 
Watch\+::reset\+Stream (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Helper to restart the outgoing stream to the backend. 

References \mbox{\hyperlink{class_watch_a444d1b684995b48c0fa178ab7fa79ca3}{init\+Stream()}}, \mbox{\hyperlink{watch_8js_aa6fdd07b218f5ee1f103f79a4ad6d5f1}{logger\+\_\+1}}, and \mbox{\hyperlink{_0dgoogle-cloud_2firestore_2build_2src_2util_8js_aaf8bdc7a31a57b85aa6575ef8ffdd793}{request\+Tag}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_a8550a3e7706176102c2f303551f10f4f_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_a8550a3e7706176102c2f303551f10f4f_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_watch_aaf85c5a50cb5537605683fc43c2eccf0}\index{Watch@{Watch}!shutdown@{shutdown}}
\index{shutdown@{shutdown}!Watch@{Watch}}
\doxysubsubsection{\texorpdfstring{shutdown()}{shutdown()}}
{\footnotesize\ttfamily \label{class_watch_aaf85c5a50cb5537605683fc43c2eccf0} 
Watch\+::shutdown (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Closes the stream and clears all timeouts. 

References \mbox{\hyperlink{logger_2dist_2esm_2index_8esm5_8js_a0adf123df8967a14b5bdd9ff3bbe2d0c}{\+\_\+a}}, \mbox{\hyperlink{firestore-namespace_8js_a6c18541a3018cee632d7e797bb983f36}{firestore}}, and \mbox{\hyperlink{get-intrinsic_2index_8js_ae6aa4817f0f49345b718ea6b4abae197}{undefined}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_watch_aaf85c5a50cb5537605683fc43c2eccf0_icgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
backend/node\+\_\+modules/@google-\/cloud/firestore/build/src/\mbox{\hyperlink{watch_8js}{watch.\+js}}\end{DoxyCompactItemize}
