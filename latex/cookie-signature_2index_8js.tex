\doxysection{backend/node\+\_\+modules/cookie-\/signature/index.js File Reference}
\hypertarget{cookie-signature_2index_8js}{}\label{cookie-signature_2index_8js}\index{backend/node\_modules/cookie-\/signature/index.js@{backend/node\_modules/cookie-\/signature/index.js}}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
function \mbox{\hyperlink{cookie-signature_2index_8js_a16973f9a625111c122c03eeceaf8800c}{sha1}} (\mbox{\hyperlink{json-bigint_2lib_2stringify_8js_abd4075a8f329b0ccafd81359c952a9df}{str}})
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
var \mbox{\hyperlink{cookie-signature_2index_8js_a3eca37c9aac9a17870baa116339724e3}{crypto}} = \mbox{\hyperlink{__stream__duplex_8js_a472985ef50ed84466f5fce48a490c29b}{require}}(\textquotesingle{}crypto\textquotesingle{})
\item 
\mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_aa4072ba4b6b56b0fb6f4801f17ab2b34}{exports}} \mbox{\hyperlink{cookie-signature_2index_8js_ae84eb428e06e9d621ec1c8cba1a69b63}{sign}}
\item 
\mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_aa4072ba4b6b56b0fb6f4801f17ab2b34}{exports}} \mbox{\hyperlink{cookie-signature_2index_8js_aee17cec6e9bceed014212c9893094d11}{unsign}}
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\Hypertarget{cookie-signature_2index_8js_a16973f9a625111c122c03eeceaf8800c}\index{index.js@{index.js}!sha1@{sha1}}
\index{sha1@{sha1}!index.js@{index.js}}
\doxysubsubsection{\texorpdfstring{sha1()}{sha1()}}
{\footnotesize\ttfamily \label{cookie-signature_2index_8js_a16973f9a625111c122c03eeceaf8800c} 
function sha1 (\begin{DoxyParamCaption}\item[{}]{str}{}\end{DoxyParamCaption})}

Private 

References \mbox{\hyperlink{cookie-signature_2index_8js_a3eca37c9aac9a17870baa116339724e3}{crypto}}, and \mbox{\hyperlink{json-bigint_2lib_2stringify_8js_abd4075a8f329b0ccafd81359c952a9df}{str()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=182pt]{cookie-signature_2index_8js_a16973f9a625111c122c03eeceaf8800c_cgraph}
\end{center}
\end{figure}


\doxysubsection{Variable Documentation}
\Hypertarget{cookie-signature_2index_8js_a3eca37c9aac9a17870baa116339724e3}\index{index.js@{index.js}!crypto@{crypto}}
\index{crypto@{crypto}!index.js@{index.js}}
\doxysubsubsection{\texorpdfstring{crypto}{crypto}}
{\footnotesize\ttfamily \label{cookie-signature_2index_8js_a3eca37c9aac9a17870baa116339724e3} 
var crypto = \mbox{\hyperlink{__stream__duplex_8js_a472985ef50ed84466f5fce48a490c29b}{require}}(\textquotesingle{}crypto\textquotesingle{})}

Module dependencies. \Hypertarget{cookie-signature_2index_8js_ae84eb428e06e9d621ec1c8cba1a69b63}\index{index.js@{index.js}!sign@{sign}}
\index{sign@{sign}!index.js@{index.js}}
\doxysubsubsection{\texorpdfstring{sign}{sign}}
{\footnotesize\ttfamily \label{cookie-signature_2index_8js_ae84eb428e06e9d621ec1c8cba1a69b63} 
\mbox{\hyperlink{jsonwebtoken_2node__modules_2jws_2index_8js_a0d71ee7668f2572bbe414f3b385612fc}{Sign\+Stream}} sign}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ \textcolor{keyword}{function}(val,\ secret)\{}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{if}\ (\textcolor{stringliteral}{'string'}\ !=\ typeof\ val)\ \textcolor{keywordflow}{throw}\ \textcolor{keyword}{new}\ TypeError(\textcolor{stringliteral}{"{}Cookie\ value\ must\ be\ provided\ as\ a\ string."{}});}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{if}\ (\textcolor{stringliteral}{'string'}\ !=\ typeof\ secret)\ \textcolor{keywordflow}{throw}\ \textcolor{keyword}{new}\ TypeError(\textcolor{stringliteral}{"{}Secret\ string\ must\ be\ provided."{}});}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{return}\ val\ +\ \textcolor{charliteral}{'.'}\ +\ \mbox{\hyperlink{cookie-signature_2index_8js_a3eca37c9aac9a17870baa116339724e3}{crypto}}}
\DoxyCodeLine{\ \ \ \ .createHmac(\textcolor{stringliteral}{'sha256'},\ secret)}
\DoxyCodeLine{\ \ \ \ .update(val)}
\DoxyCodeLine{\ \ \ \ .digest(\textcolor{stringliteral}{'base64'})}
\DoxyCodeLine{\ \ \ \ .replace(/\(\backslash\)=+\mbox{\hyperlink{form_8js_ab63a7754967c678e14c9ece9cf96be37}{\$}}/,\ \textcolor{stringliteral}{''});}
\DoxyCodeLine{\}}

\end{DoxyCode}
Sign the given {\ttfamily val} with {\ttfamily secret}.


\begin{DoxyParams}{Parameters}
{\em \{\+String\}} & val \\
\hline
{\em \{\+String\}} & secret \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\{String\} @api private 
\end{DoxyReturn}
\begin{Desc}
\item[Examples]\par
\mbox{\hyperlink{_2_users_2nicoletiokhin_2_desktop_2_software_01_semester_013_2_gamified-_programming-1_2backend_29a8b2a7b5914d06c25d49f0dbbf361e}{/\+Users/nicoletiokhin/\+Desktop/\+Software Semester 3/\+Gamified-\/\+Programming-\/1/backend/node\+\_\+modules/google-\/auth-\/library/build/src/auth/googleauth.\+js}}.\end{Desc}
\Hypertarget{cookie-signature_2index_8js_aee17cec6e9bceed014212c9893094d11}\index{index.js@{index.js}!unsign@{unsign}}
\index{unsign@{unsign}!index.js@{index.js}}
\doxysubsubsection{\texorpdfstring{unsign}{unsign}}
{\footnotesize\ttfamily \label{cookie-signature_2index_8js_aee17cec6e9bceed014212c9893094d11} 
\mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_aa4072ba4b6b56b0fb6f4801f17ab2b34}{exports}} unsign}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ \textcolor{keyword}{function}(val,\ secret)\{}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{if}\ (\textcolor{stringliteral}{'string'}\ !=\ typeof\ val)\ \textcolor{keywordflow}{throw}\ \textcolor{keyword}{new}\ TypeError(\textcolor{stringliteral}{"{}Signed\ cookie\ string\ must\ be\ provided."{}});}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{if}\ (\textcolor{stringliteral}{'string'}\ !=\ typeof\ secret)\ \textcolor{keywordflow}{throw}\ \textcolor{keyword}{new}\ TypeError(\textcolor{stringliteral}{"{}Secret\ string\ must\ be\ provided."{}});}
\DoxyCodeLine{\ \ var\ \mbox{\hyperlink{json-bigint_2lib_2stringify_8js_abd4075a8f329b0ccafd81359c952a9df}{str}}\ =\ val.slice(0,\ val.lastIndexOf(\textcolor{charliteral}{'.'}))}
\DoxyCodeLine{\ \ \ \ ,\ mac\ =\ \mbox{\hyperlink{_0dgoogle-cloud_2firestore_2build_2src_2index_8js_aa4072ba4b6b56b0fb6f4801f17ab2b34}{exports}}.sign(\mbox{\hyperlink{json-bigint_2lib_2stringify_8js_abd4075a8f329b0ccafd81359c952a9df}{str}},\ secret);}
\DoxyCodeLine{\ \ }
\DoxyCodeLine{\ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_a86e184a184e03e47b460100f5bc03c0b}{sha1}}(mac)\ ==\ \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_a86e184a184e03e47b460100f5bc03c0b}{sha1}}(val)\ ?\ \mbox{\hyperlink{json-bigint_2lib_2stringify_8js_abd4075a8f329b0ccafd81359c952a9df}{str}}\ :\ \textcolor{keyword}{false};}
\DoxyCodeLine{\}}

\end{DoxyCode}
Unsign and decode the given {\ttfamily val} with {\ttfamily secret}, returning {\ttfamily false} if the signature is invalid.


\begin{DoxyParams}{Parameters}
{\em \{\+String\}} & val \\
\hline
{\em \{\+String\}} & secret \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\{String\texorpdfstring{$\vert$}{|}\+Boolean\} @api private 
\end{DoxyReturn}
