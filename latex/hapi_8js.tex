\doxysection{backend/node\+\_\+modules/jwks-\/rsa/src/integrations/hapi.js File Reference}
\hypertarget{hapi_8js}{}\label{hapi_8js}\index{backend/node\_modules/jwks-\/rsa/src/integrations/hapi.js@{backend/node\_modules/jwks-\/rsa/src/integrations/hapi.js}}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{hapi_8js_a92b303b76a3f942ea819498907d5e83c}{const}} \{ \mbox{\hyperlink{jwks-rsa_2src_2index_8js_a924db195ac576d37da8e17163deb79ae}{Argument\+Error}} \} = \mbox{\hyperlink{__stream__duplex_8js_a472985ef50ed84466f5fce48a490c29b}{require}}(\textquotesingle{}../\mbox{\hyperlink{jose_2dist_2browser_2index_8js_ab343513764f2ea39eb6381949385cc3e}{errors}}\textquotesingle{})
\item 
\mbox{\hyperlink{node__modules_2_0dgrpc_2grpc-js_2build_2src_2server_8js_a92b303b76a3f942ea819498907d5e83c}{const}} \mbox{\hyperlink{hapi_8js_ae22dee5f808b75b7196dae1bf30850a1}{supported\+Alg}} = \mbox{\hyperlink{__stream__duplex_8js_a472985ef50ed84466f5fce48a490c29b}{require}}(\textquotesingle{}./\mbox{\hyperlink{rxjs_8umd_8js_a729ec4717f914fce241d4dccc9a03066}{config}}\textquotesingle{})
\item 
\mbox{\hyperlink{node__modules_2_0dgrpc_2grpc-js_2build_2src_2server_8js_a92b303b76a3f942ea819498907d5e83c}{const}} \mbox{\hyperlink{hapi_8js_a3b89a9085cd56b2d4183286e2536609a}{handle\+Signing\+Key\+Error}}
\item 
\mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_a84770557f73663cbea2a9e12e7d45257}{module}} \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_aa4072ba4b6b56b0fb6f4801f17ab2b34}{exports}} \mbox{\hyperlink{hapi_8js_a9a4e8d02b9b34bff5d38e20280e1df68}{hapi\+Jwt2\+Key\+Async}}
\item 
\mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_a84770557f73663cbea2a9e12e7d45257}{module}} \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_aa4072ba4b6b56b0fb6f4801f17ab2b34}{exports}} \mbox{\hyperlink{hapi_8js_a56651fc631dcf82f85858cc43866a8cc}{hapi\+Jwt2\+Key}}
\end{DoxyCompactItemize}


\doxysubsection{Variable Documentation}
\Hypertarget{hapi_8js_a92b303b76a3f942ea819498907d5e83c}\index{hapi.js@{hapi.js}!const@{const}}
\index{const@{const}!hapi.js@{hapi.js}}
\doxysubsubsection{\texorpdfstring{const}{const}}
{\footnotesize\ttfamily \label{hapi_8js_a92b303b76a3f942ea819498907d5e83c} 
const \{ \mbox{\hyperlink{jwks-rsa_2src_2index_8js_a924db195ac576d37da8e17163deb79ae}{Argument\+Error}} \} = \mbox{\hyperlink{__stream__duplex_8js_a472985ef50ed84466f5fce48a490c29b}{require}}(\textquotesingle{}../\mbox{\hyperlink{jose_2dist_2browser_2index_8js_ab343513764f2ea39eb6381949385cc3e}{errors}}\textquotesingle{})}

\Hypertarget{hapi_8js_a3b89a9085cd56b2d4183286e2536609a}\index{hapi.js@{hapi.js}!handleSigningKeyError@{handleSigningKeyError}}
\index{handleSigningKeyError@{handleSigningKeyError}!hapi.js@{hapi.js}}
\doxysubsubsection{\texorpdfstring{handleSigningKeyError}{handleSigningKeyError}}
{\footnotesize\ttfamily \label{hapi_8js_a3b89a9085cd56b2d4183286e2536609a} 
\mbox{\hyperlink{node__modules_2_0dgrpc_2grpc-js_2build_2src_2server_8js_a92b303b76a3f942ea819498907d5e83c}{const}} handle\+Signing\+Key\+Error}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ (err,\ cb)\ =>\ \{}
\DoxyCodeLine{\ \ }
\DoxyCodeLine{\ \ \textcolor{keywordflow}{if}\ (err\ \&\&\ err.name\ ===\ \textcolor{stringliteral}{'SigningKeyNotFoundError'})\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{return}\ cb(err,\ \textcolor{keyword}{null},\ \textcolor{keyword}{null});}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ }
\DoxyCodeLine{\ \ \textcolor{keywordflow}{if}\ (err)\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{return}\ cb(err,\ \textcolor{keyword}{null},\ \textcolor{keyword}{null});}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}
\Hypertarget{hapi_8js_a56651fc631dcf82f85858cc43866a8cc}\index{hapi.js@{hapi.js}!hapiJwt2Key@{hapiJwt2Key}}
\index{hapiJwt2Key@{hapiJwt2Key}!hapi.js@{hapi.js}}
\doxysubsubsection{\texorpdfstring{hapiJwt2Key}{hapiJwt2Key}}
{\footnotesize\ttfamily \label{hapi_8js_a56651fc631dcf82f85858cc43866a8cc} 
\mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_a84770557f73663cbea2a9e12e7d45257}{module}} \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_aa4072ba4b6b56b0fb6f4801f17ab2b34}{exports}} hapi\+Jwt2\+Key}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ \textcolor{keyword}{function}\ (options)\ \{}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{if}\ (options\ ===\ \textcolor{keyword}{null}\ ||\ options\ ===\ \mbox{\hyperlink{get-intrinsic_2index_8js_ae6aa4817f0f49345b718ea6b4abae197}{undefined}})\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{throw}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{jwks-rsa_2src_2index_8js_a924db195ac576d37da8e17163deb79ae}{ArgumentError}}(\textcolor{stringliteral}{'An\ options\ object\ must\ be\ provided\ when\ initializing\ hapiJwt2Key'});}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_af46081dcabb4da1ee7ca00228506bcb7}{client}}\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{jwks-rsa_2src_2index_8js_aef4d1a3d9d4eb1f4a9231e0589d92368}{JwksClient}}(options);}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ onError\ =\ options.handleSigningKeyError\ ||\ \mbox{\hyperlink{hapi_8js_a3b89a9085cd56b2d4183286e2536609a}{handleSigningKeyError}};}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{function}\ secretProvider(decoded,\ cb)\ \{}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{if}\ (!decoded\ ||\ !decoded.header)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{keywordflow}{return}\ cb(\textcolor{keyword}{new}\ Error(\textcolor{stringliteral}{'Cannot\ find\ a\ signing\ certificate\ if\ there\ is\ no\ header'}),\ \textcolor{keyword}{null},\ \textcolor{keyword}{null});}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{hapi_8js_ae22dee5f808b75b7196dae1bf30850a1}{supportedAlg}}.includes(decoded.header.alg))\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{keywordflow}{return}\ cb(\textcolor{keyword}{new}\ Error(\textcolor{stringliteral}{'Unsupported\ algorithm\ '}\ +\ decoded.header.alg\ +\ \textcolor{stringliteral}{'\ supplied.'}),\ \textcolor{keyword}{null},\ \textcolor{keyword}{null});}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_af46081dcabb4da1ee7ca00228506bcb7}{client}}.getSigningKey(decoded.header.kid)}
\DoxyCodeLine{\ \ \ \ \ \ .then(key\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ cb(\textcolor{keyword}{null},\ key.publicKey\ ||\ key.rsaPublicKey,\ key);}
\DoxyCodeLine{\ \ \ \ \ \ \}).\textcolor{keywordflow}{catch}(err\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ onError(err,\ (\mbox{\hyperlink{src_2util_2minimal_8js_aa3317850982dbc974f6f2272837e911a}{newError}})\ =>\ cb(\mbox{\hyperlink{src_2util_2minimal_8js_aa3317850982dbc974f6f2272837e911a}{newError}},\ \textcolor{keyword}{null},\ \textcolor{keyword}{null}));}
\DoxyCodeLine{\ \ \ \ \ \ \});}
\DoxyCodeLine{\ \ \};}
\DoxyCodeLine{\}}

\end{DoxyCode}
\Hypertarget{hapi_8js_a9a4e8d02b9b34bff5d38e20280e1df68}\index{hapi.js@{hapi.js}!hapiJwt2KeyAsync@{hapiJwt2KeyAsync}}
\index{hapiJwt2KeyAsync@{hapiJwt2KeyAsync}!hapi.js@{hapi.js}}
\doxysubsubsection{\texorpdfstring{hapiJwt2KeyAsync}{hapiJwt2KeyAsync}}
{\footnotesize\ttfamily \label{hapi_8js_a9a4e8d02b9b34bff5d38e20280e1df68} 
\mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_a84770557f73663cbea2a9e12e7d45257}{module}} \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_aa4072ba4b6b56b0fb6f4801f17ab2b34}{exports}} hapi\+Jwt2\+Key\+Async}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ (options)\ =>\ \{}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ secretProvider\ =\ \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_a84770557f73663cbea2a9e12e7d45257}{module}}.exports.hapiJwt2Key(options);}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{function}(decoded)\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{__get_tag_8js_abace523389c17bce1848e3a427871700}{Promise}}((\mbox{\hyperlink{_0dprotobufjs_2path_2index_8js_a2001ea102ec496ebdabe15e68493427a}{resolve}},\ \mbox{\hyperlink{reject_8js_a94bc21104657e301a8ec194b529feaed}{reject}})\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{keyword}{const}\ cb\ =\ (err,\ key)\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ (!key\ ||\ err)\ ?\ \mbox{\hyperlink{reject_8js_a94bc21104657e301a8ec194b529feaed}{reject}}(err)\ :\ \mbox{\hyperlink{_0dprotobufjs_2path_2index_8js_a2001ea102ec496ebdabe15e68493427a}{resolve}}(\{\ key\ \});}
\DoxyCodeLine{\ \ \ \ \ \ \};}
\DoxyCodeLine{\ \ \ \ \ \ secretProvider(decoded,\ cb);}
\DoxyCodeLine{\ \ \ \ \});}
\DoxyCodeLine{\ \ \};}
\DoxyCodeLine{\}}

\end{DoxyCode}
Call hapi\+Jwt2\+Key as a Promise 
\begin{DoxyParams}{Parameters}
{\em \{object\}} & options \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\{Promise\} 
\end{DoxyReturn}
\Hypertarget{hapi_8js_ae22dee5f808b75b7196dae1bf30850a1}\index{hapi.js@{hapi.js}!supportedAlg@{supportedAlg}}
\index{supportedAlg@{supportedAlg}!hapi.js@{hapi.js}}
\doxysubsubsection{\texorpdfstring{supportedAlg}{supportedAlg}}
{\footnotesize\ttfamily \label{hapi_8js_ae22dee5f808b75b7196dae1bf30850a1} 
\mbox{\hyperlink{node__modules_2_0dgrpc_2grpc-js_2build_2src_2server_8js_a92b303b76a3f942ea819498907d5e83c}{const}} supported\+Alg = \mbox{\hyperlink{__stream__duplex_8js_a472985ef50ed84466f5fce48a490c29b}{require}}(\textquotesingle{}./\mbox{\hyperlink{rxjs_8umd_8js_a729ec4717f914fce241d4dccc9a03066}{config}}\textquotesingle{})}

