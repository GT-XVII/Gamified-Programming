\doxysection{backend/node\+\_\+modules/jwks-\/rsa/src/integrations/koa.js File Reference}
\hypertarget{koa_8js}{}\label{koa_8js}\index{backend/node\_modules/jwks-\/rsa/src/integrations/koa.js@{backend/node\_modules/jwks-\/rsa/src/integrations/koa.js}}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{koa_8js_a92b303b76a3f942ea819498907d5e83c}{const}} \{ \mbox{\hyperlink{jwks-rsa_2src_2index_8js_a924db195ac576d37da8e17163deb79ae}{Argument\+Error}} \} = \mbox{\hyperlink{__stream__duplex_8js_a472985ef50ed84466f5fce48a490c29b}{require}}(\textquotesingle{}../\mbox{\hyperlink{jose_2dist_2browser_2index_8js_ab343513764f2ea39eb6381949385cc3e}{errors}}\textquotesingle{})
\item 
\mbox{\hyperlink{node__modules_2_0dgrpc_2grpc-js_2build_2src_2server_8js_a92b303b76a3f942ea819498907d5e83c}{const}} \mbox{\hyperlink{koa_8js_ae22dee5f808b75b7196dae1bf30850a1}{supported\+Alg}} = \mbox{\hyperlink{__stream__duplex_8js_a472985ef50ed84466f5fce48a490c29b}{require}}(\textquotesingle{}./\mbox{\hyperlink{rxjs_8umd_8js_a729ec4717f914fce241d4dccc9a03066}{config}}\textquotesingle{})
\item 
\mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_a84770557f73663cbea2a9e12e7d45257}{module}} \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_aa4072ba4b6b56b0fb6f4801f17ab2b34}{exports}} \mbox{\hyperlink{koa_8js_af6d5ddb6f287bc28caff61efe34a0ed1}{koa\+Jwt\+Secret}}
\end{DoxyCompactItemize}


\doxysubsection{Variable Documentation}
\Hypertarget{koa_8js_a92b303b76a3f942ea819498907d5e83c}\index{koa.js@{koa.js}!const@{const}}
\index{const@{const}!koa.js@{koa.js}}
\doxysubsubsection{\texorpdfstring{const}{const}}
{\footnotesize\ttfamily \label{koa_8js_a92b303b76a3f942ea819498907d5e83c} 
const \{ \mbox{\hyperlink{jwks-rsa_2src_2index_8js_a924db195ac576d37da8e17163deb79ae}{Argument\+Error}} \} = \mbox{\hyperlink{__stream__duplex_8js_a472985ef50ed84466f5fce48a490c29b}{require}}(\textquotesingle{}../\mbox{\hyperlink{jose_2dist_2browser_2index_8js_ab343513764f2ea39eb6381949385cc3e}{errors}}\textquotesingle{})}

\Hypertarget{koa_8js_af6d5ddb6f287bc28caff61efe34a0ed1}\index{koa.js@{koa.js}!koaJwtSecret@{koaJwtSecret}}
\index{koaJwtSecret@{koaJwtSecret}!koa.js@{koa.js}}
\doxysubsubsection{\texorpdfstring{koaJwtSecret}{koaJwtSecret}}
{\footnotesize\ttfamily \label{koa_8js_af6d5ddb6f287bc28caff61efe34a0ed1} 
\mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_a84770557f73663cbea2a9e12e7d45257}{module}} \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_aa4072ba4b6b56b0fb6f4801f17ab2b34}{exports}} koa\+Jwt\+Secret}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ \textcolor{keyword}{function}\ (options\ =\ \{\})\ \{}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{if}\ (!options.jwksUri)\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{throw}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{jwks-rsa_2src_2index_8js_a924db195ac576d37da8e17163deb79ae}{ArgumentError}}(\textcolor{stringliteral}{'No\ JWKS\ provided.\ Please\ provide\ a\ jwksUri'});}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_af46081dcabb4da1ee7ca00228506bcb7}{client}}\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{jwks-rsa_2src_2index_8js_aef4d1a3d9d4eb1f4a9231e0589d92368}{JwksClient}}(options);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{function}\ secretProvider(\{\ alg,\ kid\ \}\ =\ \{\})\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{__get_tag_8js_abace523389c17bce1848e3a427871700}{Promise}}((\mbox{\hyperlink{_0dprotobufjs_2path_2index_8js_a2001ea102ec496ebdabe15e68493427a}{resolve}},\ \mbox{\hyperlink{reject_8js_a94bc21104657e301a8ec194b529feaed}{reject}})\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{koa_8js_ae22dee5f808b75b7196dae1bf30850a1}{supportedAlg}}.includes(alg))\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{reject_8js_a94bc21104657e301a8ec194b529feaed}{reject}}(\textcolor{keyword}{new}\ Error(\textcolor{stringliteral}{'Missing\ /\ invalid\ token\ algorithm'}));}
\DoxyCodeLine{\ \ \ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \mbox{\hyperlink{database-compat_2dist_2index_8standalone_8js_af46081dcabb4da1ee7ca00228506bcb7}{client}}.getSigningKey(kid)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .then(key\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_0dprotobufjs_2path_2index_8js_a2001ea102ec496ebdabe15e68493427a}{resolve}}(key.publicKey\ ||\ key.rsaPublicKey);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}).\textcolor{keywordflow}{catch}(err\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (options.handleSigningKeyError)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ options.handleSigningKeyError(err).then(\mbox{\hyperlink{reject_8js_a94bc21104657e301a8ec194b529feaed}{reject}});}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{reject_8js_a94bc21104657e301a8ec194b529feaed}{reject}}(err);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{\ \ \ \ \});}
\DoxyCodeLine{\ \ \};}
\DoxyCodeLine{\}}

\end{DoxyCode}
\Hypertarget{koa_8js_ae22dee5f808b75b7196dae1bf30850a1}\index{koa.js@{koa.js}!supportedAlg@{supportedAlg}}
\index{supportedAlg@{supportedAlg}!koa.js@{koa.js}}
\doxysubsubsection{\texorpdfstring{supportedAlg}{supportedAlg}}
{\footnotesize\ttfamily \label{koa_8js_ae22dee5f808b75b7196dae1bf30850a1} 
\mbox{\hyperlink{node__modules_2_0dgrpc_2grpc-js_2build_2src_2server_8js_a92b303b76a3f942ea819498907d5e83c}{const}} supported\+Alg = \mbox{\hyperlink{__stream__duplex_8js_a472985ef50ed84466f5fce48a490c29b}{require}}(\textquotesingle{}./\mbox{\hyperlink{rxjs_8umd_8js_a729ec4717f914fce241d4dccc9a03066}{config}}\textquotesingle{})}

